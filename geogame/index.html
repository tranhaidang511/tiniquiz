<!doctype html>
<html lang="en">

<head>
  <!-- Google Consent Mode -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'analytics_storage': 'denied'
    });
  </script>
  <!-- End Google Consent Mode -->

  <!-- Google Tag Manager -->
  <script>
    (function (w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-56G5F5W4');
  </script>
  <!-- End Google Tag Manager -->

  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GeoGame</title>
  <link rel="stylesheet" href="./style.css">

  <meta name="description" content="GeoGame - Test your geography knowledge with fun and interactive map challenges!" />
  <meta name="keywords" content="GeoGame, geography, map, quiz, game, world, countries, capitals, flags, learning" />
  <meta name="author" content="Tran Hai Dang" />
  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="GeoGame" />
  <meta property="og:description" content="Test your geography knowledge with fun and interactive map challenges!" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://tiniquiz.com/geogame/" />
  <meta property="og:image" content="https://tiniquiz.com/geogame/favicon.svg" />
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="GeoGame" />
  <meta name="twitter:description" content="Test your geography knowledge with fun and interactive map challenges!" />
  <meta name="twitter:image" content="https://tiniquiz.com/geogame/favicon.svg" />
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56G5F5W4" height="0" width="0"
      style="display:none;visibility:hidden"></iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div id="app">
    <div class="header-controls">
      <button id="home-btn" class="icon-btn" aria-label="Back to Home">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
      </button>
      <h1>GeoGame</h1>
    </div>

    <!-- Language Switcher -->
    <div class="lang-switcher">
      <button class="lang-btn active" data-lang="en">EN</button>
      <button class="lang-btn" data-lang="ja">JA</button>
      <button class="lang-btn" data-lang="vi">VI</button>
    </div>

    <div id="menu-view" class="card animate-fade-in">
      <h1 id="menu-title">GeoGame</h1>
      <div class="controls">
        <label id="label-mode">Game Mode</label>
        <div class="mode-selector">
          <button id="mode-capitals" class="mode-btn active" data-mode="CAPITALS">Capitals</button>
          <button id="mode-flags" class="mode-btn" data-mode="FLAGS">Flags</button>
          <button id="mode-provinces" class="mode-btn" data-mode="PROVINCES">Capitals of States/Provinces</button>
        </div>

        <div id="country-filter-container" class="hidden">
          <label id="label-country-filter">Filter by Country</label>
          <select id="country-filter"></select>
        </div>

        <div id="region-filter-container">
          <label id="label-filter">Filter by Region</label>
          <select id="region-filter">
            <option value="allWorld" id="option-all-world">All World</option>
            <optgroup label="Continents" id="continent-options"></optgroup>
            <optgroup label="Regions" id="region-options"></optgroup>
          </select>
        </div>

        <label>
          <span id="label-count">Number of Questions</span>
          <input type="number" id="count-filter" value="5" min="1" max="200">
        </label>

        <button id="start-btn" class="primary">Start Game</button>
      </div>
    </div>

    <!-- Game View -->
    <div id="game-view" class="card hidden animate-fade-in">
      <button id="new-game-btn" class="primary">New Game</button>

      <div class="game-header">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="game-timer">
          <span id="game-time-label">Time</span>: <span id="game-timer">00:00</span>
        </div>
      </div>

      <div id="flag-container" class="hidden">
        <img id="flag-image" src="" alt="Flag" />
      </div>

      <h3 id="question-text" class="question-text"></h3>

      <div class="choices-grid" id="choices-container">
        <!-- Buttons injected here -->
      </div>
    </div>

    <!-- Result View -->
    <div id="result-view" class="card hidden animate-fade-in">
      <h2 id="result-title">Game Over!</h2>
      <div class="score-display">
        <span id="final-score">0</span> / <span id="total-questions">0</span>
      </div>
      <div class="time-display">
        <span id="time-label">Total Time</span>: <span id="elapsed-time">00:00</span>
      </div>

      <!-- High Scores Table -->
      <div class="high-scores-container">
        <h3 id="high-scores-title">High Scores</h3>
        <table id="high-scores-table">
          <thead>
            <tr>
              <th id="th-rank">Rank</th>
              <th id="th-score">Score</th>
              <th id="th-time">Time</th>
              <th id="th-date">Date</th>
            </tr>
          </thead>
          <tbody id="high-scores-body">
            <!-- Scores injected here -->
          </tbody>
        </table>
      </div>

      <button id="restart-btn" class="primary">Play Again</button>
    </div>
  </div>
  <script type="module" src="/main.ts"></script>
</body>

</html>