<!doctype html>
<html lang="en">

<head>
    <!-- Google Consent Mode -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied'
        });
    </script>
    <!-- End Google Consent Mode -->

    <!-- Google Tag Manager -->
    <script>
        (function (w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-56G5F5W4');
    </script>
    <!-- End Google Tag Manager -->

    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./favicon-DNhQh7h9.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mancala</title>


    <meta name="description" content="Mancala - Classic strategy board game. Collect stones to win!" />
    <meta name="keywords" content="Mancala, Kalah, board game, strategy, game" />
    <meta name="author" content="Tran Hai Dang" />
    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Mancala" />
    <meta property="og:description" content="Mancala - Classic strategy board game. Collect stones to win!" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://tiniquiz.com/mancala/" />
    <meta property="og:image" content="https://tiniquiz.com/mancala/favicon-DNhQh7h9.svg" />
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Mancala" />
    <meta name="twitter:description" content="Mancala - Classic strategy board game. Collect stones to win!" />
    <meta name="twitter:image" content="https://tiniquiz.com/mancala/favicon-DNhQh7h9.svg" />
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();class W{difficulty;maxDepth;constructor(t="MEDIUM"){this.difficulty=t,this.maxDepth=this.getMaxDepth(t)}getMaxDepth(t){switch(t){case"EASY":return 2;case"MEDIUM":return 4;case"HARD":return 6}}setDifficulty(t){this.difficulty=t,this.maxDepth=this.getMaxDepth(t)}getBestMove(t,e,n){const i=this.getValidMoves(t,e,n);if(i.length===0)return-1;if(i.length===1)return i[0];if(this.difficulty==="EASY"&&Math.random()<.3)return i[Math.floor(Math.random()*i.length)];let s=i[0],r=-1/0;for(const h of i){const d=[...t],l=this.simulateMove(d,h,e,n),g=this.minimax(d,e,this.maxDepth-1,-1/0,1/0,l?n:this.getOpponent(n),n);g>r&&(r=g,s=h)}return s}minimax(t,e,n,i,s,r,h){if(n===0||this.isGameOver(t,e))return this.evaluate(t,e,h);const d=this.getValidMoves(t,e,r);if(d.length===0)return this.evaluate(t,e,h);if(r===h){let l=-1/0;for(const g of d){const f=[...t],u=this.simulateMove(f,g,e,r),m=this.minimax(f,e,n-1,i,s,u?r:this.getOpponent(r),h);if(l=Math.max(l,m),i=Math.max(i,m),s<=i)break}return l}else{let l=1/0;for(const g of d){const f=[...t],u=this.simulateMove(f,g,e,r),m=this.minimax(f,e,n-1,i,s,u?r:this.getOpponent(r),h);if(l=Math.min(l,m),s=Math.min(s,m),s<=i)break}return l}}evaluate(t,e,n){const i=e,s=e*2+1,r=n==="PLAYER1"?i:s,h=n==="PLAYER1"?s:i;let d=(t[r]-t[h])*10;const l=n==="PLAYER1"?0:e+1,g=n==="PLAYER1"?e:e*2+1;let f=0;for(let u=l;u<g;u++)f+=t[u];d+=f*.5;for(let u=l;u<g;u++){const m=t[u];m>0&&(u+m)%t.length===r&&(d+=5)}return d}getValidMoves(t,e,n){const i=[];if(n==="PLAYER1")for(let s=0;s<e;s++)t[s]>0&&i.push(s);else for(let s=e+1;s<e*2+1;s++)t[s]>0&&i.push(s);return i}simulateMove(t,e,n,i){const s=t[e];t[e]=0;let r=e,h=s,d=e;const l=n,g=n*2+1,f=i==="PLAYER1"?g:l;for(;h>0;)r=(r+1)%t.length,r!==f&&(t[r]++,h--,d=r);const u=i==="PLAYER1"?l:g;if((i==="PLAYER1"?d<n:d>n&&d<n*2+1)&&t[d]===1&&d!==u){const y=this.getOppositeIndex(d,n),p=t[y];p>0&&(t[u]+=t[d]+p,t[d]=0,t[y]=0)}return d===u}getOppositeIndex(t,e){const n=e,i=e*2+1;return t<e?i-1-t:n-1-(t-e-1)}getOpponent(t){return t==="PLAYER1"?"PLAYER2":"PLAYER1"}isGameOver(t,e){const n=t.slice(0,e).reduce((s,r)=>s+r,0),i=t.slice(e+1,e*2+1).reduce((s,r)=>s+r,0);return n===0||i===0}}class q{pitCount=6;initialStones=4;gameMode="TWO_PLAYER";difficulty="MEDIUM";gameState="MENU";currentPlayer="PLAYER1";board=[];moveHistory=[];winner=null;startTime=0;elapsedTime=0;timerInterval=null;lastMovePit=null;ai;aiMoveListeners=[];stateChangeListeners=[];moveListeners=[];boardUpdateListeners=[];constructor(){this.ai=new W(this.difficulty),this.initializeBoard()}initializeBoard(){const t=this.pitCount*2+2;this.board=new Array(t).fill(0);for(let e=0;e<this.pitCount;e++)this.board[e]=this.initialStones,this.board[e+this.pitCount+1]=this.initialStones;this.board[this.pitCount]=0,this.board[this.pitCount*2+1]=0}setPitCount(t){this.pitCount=t}setInitialStones(t){this.initialStones=t}getInitialStones(){return this.initialStones}setGameMode(t){this.gameMode=t}setDifficulty(t){this.difficulty=t,this.ai.setDifficulty(t)}getDifficulty(){return this.difficulty}getPitCount(){return this.pitCount}getGameMode(){return this.gameMode}getLastMovePit(){return this.lastMovePit}start(){this.initializeBoard(),this.currentPlayer="PLAYER1",this.moveHistory=[],this.winner=null,this.startTime=Date.now(),this.elapsedTime=0,this.gameState="PLAYING",this.notifyStateChange(),this.startTimer()}restart(){this.stopTimer(),this.gameState="MENU",this.notifyStateChange()}startTimer(){this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=window.setInterval(()=>{this.elapsedTime=Date.now()-this.startTime},1e3)}stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}isValidMove(t){if(this.gameState!=="PLAYING")return!1;const e=t>=0&&t<this.pitCount,n=t>this.pitCount&&t<this.pitCount*2+1;return this.currentPlayer==="PLAYER1"?e&&this.board[t]>0:n&&this.board[t]>0}makeMove(t){if(!this.isValidMove(t))return!1;this.lastMovePit=t;const e=this.board[t];this.board[t]=0;let n=t,i=e,s=t;const r=this.pitCount,h=this.pitCount*2+1,d=this.currentPlayer==="PLAYER1"?h:r;for(;i>0;)n=(n+1)%this.board.length,n!==d&&(this.board[n]++,i--,s=n);let l=!1,g=0;const f=this.currentPlayer==="PLAYER1"?r:h;if(s===f)l=!0;else if((this.currentPlayer==="PLAYER1"?s<this.pitCount:s>this.pitCount&&s<this.pitCount*2+1)&&this.board[s]===1){const y=this.getOppositeIndex(s),p=this.board[y];p>0&&(g=this.board[s]+p,this.board[f]+=g,this.board[s]=0,this.board[y]=0)}const u={player:this.currentPlayer,pitIndex:t,capturedStones:g>0?g:void 0,extraTurn:l};return this.moveHistory.push(u),this.notifyMove(u),l||this.switchPlayer(),this.checkWinCondition(),this.notifyBoardUpdate(),this.gameMode==="VS_AI"&&this.currentPlayer==="PLAYER2"&&this.gameState==="PLAYING"&&this.notifyAIMove(),!0}async makeAIMove(){if(this.gameMode!=="VS_AI"||this.currentPlayer!=="PLAYER2"||this.gameState!=="PLAYING")return;await new Promise(e=>setTimeout(e,1e3));const t=this.ai.getBestMove(this.getBoard(),this.pitCount,"PLAYER2");t!==-1&&this.makeMove(t)}getOppositeIndex(t){const e=this.pitCount,n=this.pitCount*2+1;return t<this.pitCount?n-1-t:e-1-(t-this.pitCount-1)}switchPlayer(){this.currentPlayer=this.currentPlayer==="PLAYER1"?"PLAYER2":"PLAYER1"}checkWinCondition(){const t=this.board.slice(0,this.pitCount).reduce((n,i)=>n+i,0),e=this.board.slice(this.pitCount+1,this.pitCount*2+1).reduce((n,i)=>n+i,0);if(t===0||e===0){const n=this.pitCount,i=this.pitCount*2+1;this.board[n]+=t,this.board[i]+=e;for(let s=0;s<this.pitCount;s++)this.board[s]=0,this.board[s+this.pitCount+1]=0;this.board[n]>this.board[i]?this.winner="PLAYER1":this.board[i]>this.board[n]?this.winner="PLAYER2":this.winner=null,this.endGame()}}endGame(){this.stopTimer(),this.gameState="RESULT",this.notifyStateChange()}getBoard(){return[...this.board]}getCurrentPlayer(){return this.currentPlayer}getState(){return this.gameState}getWinner(){return this.winner}getMoves(){return[...this.moveHistory]}getElapsedTime(){return this.elapsedTime}getPlayerScore(t){const e=t==="PLAYER1"?this.pitCount:this.pitCount*2+1;return this.board[e]}formatTime(t){const e=Math.floor(t/1e3),n=Math.floor(e/60),i=e%60;return`${n}:${i.toString().padStart(2,"0")}`}onStateChange(t){this.stateChangeListeners.push(t)}onMove(t){this.moveListeners.push(t)}onBoardUpdate(t){this.boardUpdateListeners.push(t)}onAIMove(t){this.aiMoveListeners.push(t)}notifyStateChange(){this.stateChangeListeners.forEach(t=>t(this.gameState))}notifyMove(t){this.moveListeners.forEach(e=>e(t))}notifyBoardUpdate(){this.boardUpdateListeners.forEach(t=>t())}notifyAIMove(){this.aiMoveListeners.forEach(t=>t())}}const a=new q;class O{currentLang="en";listeners=[];locales;constructor(t,e="en"){this.locales=t,this.currentLang=e}get language(){return this.currentLang}setLanguage(t){this.currentLang!==t&&(this.currentLang=t,localStorage.setItem("language",t),this.notifyListeners())}subscribe(t){this.listeners.push(t)}notifyListeners(){this.listeners.forEach(t=>t(this.currentLang))}getUIText(t,e){const n=this.locales[this.currentLang]?.ui;let i=n&&n[t]||t;return e&&Object.entries(e).forEach(([s,r])=>{i=i.replace(`{${s}}`,r)}),i}}const V={ui:{gameTitle:"Mancala",gameSetup:"Game Setup",gameMode:"Game Mode",twoPlayers:"2 Players",vsAI:"vs AI",comingSoon:"Coming Soon",easy:"Easy",medium:"Medium",hard:"Hard",pitCount:"Pits Per Side",initialStones:"Stones Per Pit",startGame:"Start Game",newGame:"New Game",player1Turn:"Player 1's Turn",player2Turn:"Player 2's Turn",you:"You",ai:"AI",yourTurn:"Your Turn",aiTurn:"AI's Turn",youWin:"You Win!",aiWins:"AI Wins!",yourScore:"Your Score",aiScore:"AI Score",move:"Move",time:"Time",totalTime:"Total Time",totalMoves:"Total Moves",player1Wins:"Player 1 Wins!",player2Wins:"Player 2 Wins!",draw:"It's a Draw!",player1Score:"Player 1 Score",player2Score:"Player 2 Score",playAgain:"Play Again",highScores:"High Scores",rank:"Rank",moves:"Moves",date:"Date"}},H={ui:{gameTitle:"„Éû„É≥„Ç´„É©",gameSetup:"„Ç≤„Éº„É†Ë®≠ÂÆö",gameMode:"„Ç≤„Éº„É†„É¢„Éº„Éâ",twoPlayers:"‰∫å‰∫∫ÂØæÊà¶",vsAI:"AIÂØæÊà¶",comingSoon:"ËøëÊó•ÂÖ¨Èñã",easy:"Á∞°Âçò",medium:"ÊôÆÈÄö",hard:"Èõ£„Åó„ÅÑ",pitCount:"Á©¥„ÅÆÊï∞",initialStones:"Á©¥„Åî„Å®„ÅÆÁü≥„ÅÆÊï∞",startGame:"„Ç≤„Éº„É†ÈñãÂßã",newGame:"Êñ∞Ë¶è„Ç≤„Éº„É†",player1Turn:"„Éó„É¨„Ç§„É§„Éº1„ÅÆÁï™",player2Turn:"„Éó„É¨„Ç§„É§„Éº2„ÅÆÁï™",you:"„ÅÇ„Å™„Åü",ai:"AI",yourTurn:"„ÅÇ„Å™„Åü„ÅÆÁï™",aiTurn:"AI„ÅÆÁï™",youWin:"„ÅÇ„Å™„Åü„ÅÆÂãùÂà©ÔºÅ",aiWins:"AI„ÅÆÂãùÂà©ÔºÅ",yourScore:"„ÅÇ„Å™„Åü„ÅÆ„Çπ„Ç≥„Ç¢",aiScore:"AI„Çπ„Ç≥„Ç¢",move:"ÊâãÊï∞",time:"ÊôÇÈñì",totalTime:"ÂêàË®àÊôÇÈñì",totalMoves:"ÂêàË®àÊâãÊï∞",player1Wins:"„Éó„É¨„Ç§„É§„Éº1„ÅÆÂãùÂà©ÔºÅ",player2Wins:"„Éó„É¨„Ç§„É§„Éº2„ÅÆÂãùÂà©ÔºÅ",draw:"Âºï„ÅçÂàÜ„ÅëÔºÅ",player1Score:"„Éó„É¨„Ç§„É§„Éº1„Çπ„Ç≥„Ç¢",player2Score:"„Éó„É¨„Ç§„É§„Éº2„Çπ„Ç≥„Ç¢",playAgain:"„ÇÇ„ÅÜ‰∏ÄÂ∫¶",highScores:"„Éè„Ç§„Çπ„Ç≥„Ç¢",rank:"È†Ü‰Ωç",moves:"ÊâãÊï∞",date:"Êó•‰ªò"}},$={ui:{gameTitle:"Mancala",gameSetup:"Thi·∫øt l·∫≠p tr√≤ ch∆°i",gameMode:"Ch·∫ø ƒë·ªô ch∆°i",twoPlayers:"2 Ng∆∞·ªùi ch∆°i",vsAI:"ƒê·∫•u v·ªõi AI",comingSoon:"S·∫Øp ra m·∫Øt",easy:"D·ªÖ",medium:"Trung b√¨nh",hard:"Kh√≥",pitCount:"S·ªë h·ªë m·ªói b√™n",initialStones:"S·ªë ƒë√° m·ªói h·ªë",startGame:"B·∫Øt ƒë·∫ßu",newGame:"V√°n m·ªõi",player1Turn:"L∆∞·ª£t Ng∆∞·ªùi ch∆°i 1",player2Turn:"L∆∞·ª£t Ng∆∞·ªùi ch∆°i 2",you:"B·∫°n",ai:"AI",yourTurn:"L∆∞·ª£t c·ªßa b·∫°n",aiTurn:"L∆∞·ª£t AI",youWin:"B·∫°n th·∫Øng!",aiWins:"AI th·∫Øng!",yourScore:"ƒêi·ªÉm c·ªßa b·∫°n",aiScore:"ƒêi·ªÉm AI",move:"N∆∞·ªõc",time:"Th·ªùi gian",totalTime:"T·ªïng th·ªùi gian",totalMoves:"T·ªïng s·ªë n∆∞·ªõc",player1Wins:"Ng∆∞·ªùi ch∆°i 1 th·∫Øng!",player2Wins:"Ng∆∞·ªùi ch∆°i 2 th·∫Øng!",draw:"H√≤a!",player1Score:"ƒêi·ªÉm Ng∆∞·ªùi ch∆°i 1",player2Score:"ƒêi·ªÉm Ng∆∞·ªùi ch∆°i 2",playAgain:"Ch∆°i l·∫°i",highScores:"ƒêi·ªÉm cao",rank:"H·∫°ng",moves:"N∆∞·ªõc",date:"Ng√†y"}};class j{dialog;STORAGE_KEY="consentMode";constructor(){this.dialog=document.createElement("div"),this.dialog.className="consent-dialog",this.dialog.innerHTML=`
            <div class="consent-content">
                <h3>We value your privacy</h3>
                <p>We use cookies to improve your experience, analyze traffic, and show relevant ads.</p>
                <p>You can choose to accept or reject these cookies.</p>
                <p>Essential cookies are always on because they are required for the site to work.</p>
                <div class="consent-buttons">
                    <button id="btn-reject" class="btn-reject">Reject All</button>
                    <button id="btn-accept" class="btn-accept">Accept All</button>
                </div>
            </div>
        `,document.body.appendChild(this.dialog),this.init()}init(){const t=localStorage.getItem(this.STORAGE_KEY);t?this.updateConsent(t==="granted"):this.showDialog(),this.dialog.querySelector("#btn-accept")?.addEventListener("click",()=>{this.setConsent(!0)}),this.dialog.querySelector("#btn-reject")?.addEventListener("click",()=>{this.setConsent(!1)})}showDialog(){this.dialog.style.display="flex"}hideDialog(){this.dialog.style.display="none"}setConsent(t){localStorage.setItem(this.STORAGE_KEY,t?"granted":"denied"),this.updateConsent(t),this.hideDialog()}updateConsent(t){const e=t?"granted":"denied";typeof window.gtag=="function"&&window.gtag("consent","update",{ad_storage:e,ad_user_data:e,ad_personalization:e,analytics_storage:e})}}new j;const z=localStorage.getItem("language"),c=new O({en:V,ja:H,vi:$},z||"en"),J=()=>{F(),N(),document.querySelectorAll(".lang-btn").forEach(o=>{o.classList.toggle("active",o.dataset.lang===c.language)}),K()},D=()=>{const o=document.querySelector(".mode-btn.active:not([data-difficulty])"),t=document.querySelector(".mode-btn.active[data-difficulty]"),e=document.querySelector(".pit-btn.active"),n=document.querySelector(".stones-btn.active");if(o&&e&&n){const i={mode:o.dataset.mode,difficulty:t?t.dataset.difficulty:"MEDIUM",pits:e.dataset.pits,stones:n.dataset.stones};localStorage.setItem("mancala_setup",JSON.stringify(i))}},K=()=>{try{const o=localStorage.getItem("mancala_setup");if(o){const{mode:t,difficulty:e,pits:n,stones:i}=JSON.parse(o);t&&document.querySelectorAll(".mode-btn:not(.disabled)").forEach(s=>{if(s.dataset.mode===t){s.classList.add("active"),a.setGameMode(t);const h=document.querySelector(".difficulty-section");h&&(t==="VS_AI"?h.classList.remove("hidden"):h.classList.add("hidden"))}else s.classList.remove("active")}),n&&document.querySelectorAll(".pit-btn").forEach(s=>{s.dataset.pits===n?(s.classList.add("active"),a.setPitCount(parseInt(n))):s.classList.remove("active")}),e&&document.querySelectorAll(".mode-btn[data-difficulty]").forEach(s=>{s.dataset.difficulty===e?(s.classList.add("active"),a.setDifficulty(e)):s.classList.remove("active")}),i&&document.querySelectorAll(".stones-btn").forEach(s=>{s.dataset.stones===i?(s.classList.add("active"),a.setInitialStones(parseInt(i))):s.classList.remove("active")})}}catch(o){console.error("Failed to load Mancala setup:",o)}},N=()=>{const o=document.getElementById("game-title");o&&(o.textContent=c.getUIText("gameTitle"));const t=document.getElementById("menu-title");t&&(t.textContent=c.getUIText("gameSetup"));const e=document.getElementById("label-mode");e&&(e.textContent=c.getUIText("gameMode"));const n=document.getElementById("mode-two-player");n&&(n.textContent=c.getUIText("twoPlayers"));const i=document.getElementById("mode-vs-ai");i&&(i.textContent=c.getUIText("vsAI"));const s=document.getElementById("label-difficulty");s&&(s.textContent=c.getUIText("difficulty"));const r=document.getElementById("difficulty-easy");r&&(r.textContent=c.getUIText("easy"));const h=document.getElementById("difficulty-medium");h&&(h.textContent=c.getUIText("medium"));const d=document.getElementById("difficulty-hard");d&&(d.textContent=c.getUIText("hard"));const l=document.getElementById("label-pit-count");l&&(l.textContent=c.getUIText("pitCount"));const g=document.getElementById("label-initial-stones");g&&(g.textContent=c.getUIText("initialStones"));const f=document.getElementById("start-btn");f&&(f.textContent=c.getUIText("startGame"));const u=document.getElementById("new-game-btn");u&&(u.textContent=c.getUIText("newGame"));const m=document.getElementById("label-move");m&&(m.textContent=c.getUIText("move"));const y=document.getElementById("label-time");y&&(y.textContent=c.getUIText("time"));const p=document.getElementById("label-player1-score");if(p){const x=a.getGameMode()==="VS_AI";p.textContent=x?c.getUIText("yourScore"):c.getUIText("player1Score")}const E=document.getElementById("label-player2-score");if(E){const x=a.getGameMode()==="VS_AI";E.textContent=x?c.getUIText("aiScore"):c.getUIText("player2Score")}const L=document.getElementById("label-total-moves");L&&(L.textContent=c.getUIText("totalMoves"));const T=document.getElementById("label-total-time");T&&(T.textContent=c.getUIText("totalTime"));const S=document.getElementById("restart-btn");S&&(S.textContent=c.getUIText("playAgain"));const b=document.getElementById("label-force-jump");b&&(b.textContent=c.getUIText("forceJump"));const M=document.getElementById("high-scores-title");M&&(M.textContent=c.getUIText("highScores"));const w=document.getElementById("th-rank");w&&(w.textContent=c.getUIText("rank"));const B=document.getElementById("th-score");B&&(B.textContent=c.getUIText("yourScore"));const U=document.getElementById("th-moves");U&&(U.textContent=c.getUIText("moves"));const Y=document.getElementById("th-time");Y&&(Y.textContent=c.getUIText("time"));const R=document.getElementById("th-date");R&&(R.textContent=c.getUIText("date")),I()},F=()=>{document.getElementById("home-btn")?.addEventListener("click",()=>{window.location.href="/"}),document.querySelectorAll(".lang-btn").forEach(o=>{o.addEventListener("click",t=>{const e=t.target.dataset.lang;c.setLanguage(e),document.querySelectorAll(".lang-btn").forEach(n=>n.classList.remove("active")),t.target.classList.add("active")})}),document.querySelectorAll(".mode-btn:not([data-difficulty])").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=e.dataset.mode;document.querySelectorAll(".mode-btn:not([data-difficulty])").forEach(s=>s.classList.remove("active")),e.classList.add("active"),a.setGameMode(n);const i=document.querySelector(".difficulty-section");i&&(n==="VS_AI"?i.classList.remove("hidden"):i.classList.add("hidden"))})}),document.querySelectorAll(".mode-btn[data-difficulty]").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=e.dataset.difficulty;document.querySelectorAll(".mode-btn[data-difficulty]").forEach(i=>i.classList.remove("active")),e.classList.add("active"),a.setDifficulty(n)})}),document.querySelectorAll(".pit-btn").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=parseInt(e.dataset.pits||"6");document.querySelectorAll(".pit-btn").forEach(i=>i.classList.remove("active")),e.classList.add("active"),a.setPitCount(n)})}),document.querySelectorAll(".stones-btn").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=parseInt(e.dataset.stones||"4");document.querySelectorAll(".stones-btn").forEach(i=>i.classList.remove("active")),e.classList.add("active"),a.setInitialStones(n)})}),document.getElementById("start-btn")?.addEventListener("click",()=>{D(),a.start()}),document.getElementById("new-game-btn")?.addEventListener("click",()=>{a.restart()}),document.getElementById("restart-btn")?.addEventListener("click",()=>{a.restart()})};document.querySelectorAll(".mode-btn[data-difficulty]").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=e.dataset.difficulty;document.querySelectorAll(".mode-btn[data-difficulty]").forEach(i=>i.classList.remove("active")),e.classList.add("active"),a.setDifficulty(n)})});document.querySelectorAll(".pit-btn").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=parseInt(e.dataset.pits||"6");document.querySelectorAll(".pit-btn").forEach(i=>i.classList.remove("active")),e.classList.add("active"),a.setPitCount(n)})});document.getElementById("start-btn")?.addEventListener("click",()=>{D(),a.start()});document.getElementById("new-game-btn")?.addEventListener("click",()=>{a.restart()});document.getElementById("restart-btn")?.addEventListener("click",()=>{a.restart()});const P=o=>{if(o===0)return"";if(o<=16){const e=[];for(let n=0;n<o;n++)e.push('<div class="stone"></div>');return`<div class="stones-container small">${e.join("")}</div>`}const t=[];for(let e=0;e<16;e++)t.push('<div class="stone"></div>');return`
        <div class="stones-container large">
            ${t.join("")}
            <div class="stone-badge">${o}</div>
        </div>
    `},A=()=>{const o=document.getElementById("board-container");if(!o)return;o.innerHTML="";const t=a.getPitCount(),e=a.getBoard(),n=document.createElement("div");n.className="mancala-board";const i=document.createElement("div");i.className="store player2-store",i.innerHTML=P(e[t*2+1]),n.appendChild(i);const s=document.createElement("div");s.className="pits-area";const r=document.createElement("div");r.className="pit-row player2-pits";for(let l=t*2;l>t;l--){const g=G(e[l],l,"PLAYER2");r.appendChild(g)}s.appendChild(r);const h=document.createElement("div");h.className="pit-row player1-pits";for(let l=0;l<t;l++){const g=G(e[l],l,"PLAYER1");h.appendChild(g)}s.appendChild(h),n.appendChild(s);const d=document.createElement("div");d.className="store player1-store",d.innerHTML=P(e[t]),n.appendChild(d),o.appendChild(n)},G=(o,t,e)=>{const n=document.createElement("div");return n.className="pit",n.dataset.index=t.toString(),n.dataset.owner=e,a.getLastMovePit()===t&&n.classList.add("last-move"),n.innerHTML=P(o),n.addEventListener("click",()=>{Q(t)}),(a.getGameMode()==="VS_AI"?e==="PLAYER1"&&a.isValidMove(t):a.isValidMove(t))&&n.classList.add("clickable"),n},Q=o=>{a.makeMove(o)&&(A(),I())},I=()=>{const o=document.querySelector(".turn-indicator"),t=document.getElementById("turn-text"),e=document.getElementById("move-number"),n=document.getElementById("game-timer"),i=a.getCurrentPlayer(),s=a.getMoves();o&&(o.className=`turn-indicator ${i.toLowerCase()}`),t&&(a.getGameMode()==="VS_AI"?t.textContent=i==="PLAYER1"?c.getUIText("yourTurn"):c.getUIText("aiTurn"):t.textContent=i==="PLAYER1"?c.getUIText("player1Turn"):c.getUIText("player2Turn")),e&&(e.textContent=s.length.toString()),n&&(n.textContent=a.formatTime(a.getElapsedTime()))},C=o=>{["menu-view","game-view","result-view"].forEach(t=>{const e=document.getElementById(t);e&&(t===o?e.classList.remove("hidden"):e.classList.add("hidden"))})};let k="MENU",v=null;a.onStateChange(o=>{k=o,o==="MENU"&&(C("menu-view"),v&&(clearInterval(v),v=null)),o==="PLAYING"&&(C("game-view"),A(),I(),v&&clearInterval(v),v=window.setInterval(()=>{I()},1e3)),o==="RESULT"&&(C("result-view"),v&&(clearInterval(v),v=null),v&&(clearInterval(v),v=null),X(),_())});a.onMove(()=>{A(),I()});a.onBoardUpdate(()=>{A()});a.onAIMove(()=>{a.makeAIMove()});const X=()=>{const o=a.getWinner();if(a.getGameMode()!=="VS_AI"||o!=="PLAYER1")return;const t=a.getPlayerScore("PLAYER1"),e=a.getMoves().length,n=a.getElapsedTime(),i=Date.now(),s=a.getPitCount(),r=a.getDifficulty(),h=a.getInitialStones(),d={score:t,moves:e,time:n,date:i},l=`mancala_highscores_${r}_${s}_${h}`;try{const g=localStorage.getItem(l);let f=g?JSON.parse(g):[];f.push(d),f.sort((u,m)=>u.score!==m.score?m.score-u.score:u.moves!==m.moves?u.moves-m.moves:u.time-m.time),f=f.slice(0,5),localStorage.setItem(l,JSON.stringify(f))}catch(g){console.error("Failed to save high score:",g)}},Z=()=>{if(a.getGameMode()!=="VS_AI")return[];const o=a.getPitCount(),t=a.getDifficulty(),e=a.getInitialStones(),n=`mancala_highscores_${t}_${o}_${e}`;try{const i=localStorage.getItem(n);return i?JSON.parse(i):[]}catch{return[]}},_=()=>{const o=a.getWinner(),t=document.getElementById("winner-display"),e=document.getElementById("player1-score"),n=document.getElementById("player2-score"),i=document.getElementById("total-moves"),s=document.getElementById("total-time"),r=document.getElementById("result-title"),h=a.getGameMode()==="VS_AI",d=document.getElementById("label-player1-score");d&&(d.textContent=h?c.getUIText("yourScore"):c.getUIText("player1Score"));const l=document.getElementById("label-player2-score");if(l&&(l.textContent=h?c.getUIText("aiScore"):c.getUIText("player2Score")),e&&(e.textContent=a.getPlayerScore("PLAYER1").toString()),n&&(n.textContent=a.getPlayerScore("PLAYER2").toString()),i&&(i.textContent=a.getMoves().length.toString()),s&&(s.textContent=a.formatTime(a.getElapsedTime())),o){if(r&&(a.getGameMode()==="VS_AI"?r.textContent=o==="PLAYER1"?c.getUIText("youWin"):c.getUIText("aiWins"):r.textContent=o==="PLAYER1"?c.getUIText("player1Wins"):c.getUIText("player2Wins")),t){const y=a.getGameMode()==="VS_AI"?o==="PLAYER1"?c.getUIText("youWin"):c.getUIText("aiWins"):o==="PLAYER1"?c.getUIText("player1Wins"):c.getUIText("player2Wins");t.innerHTML=`
                <div class="winner-icon ${o.toLowerCase()}">üèÜ</div>
                <span>${y}</span>
            `}}else r&&(r.textContent=c.getUIText("draw")),t&&(t.innerHTML=`<span>${c.getUIText("draw")}</span>`);const g=Z(),f=document.getElementById("high-scores-body"),u=document.querySelector(".high-scores-container");a.getGameMode()==="VS_AI"?(u&&u.classList.remove("hidden"),f&&(f.innerHTML="",g.forEach((m,y)=>{const p=document.createElement("tr"),E=a.getPlayerScore("PLAYER1"),L=a.getMoves().length,T=a.getElapsedTime();o==="PLAYER1"&&m.score===E&&m.moves===L&&m.time===T&&typeof m.date=="number"&&Date.now()-m.date<1e3&&p.classList.add("current-run");let S="";if(typeof m.date=="number"){const M=c.language==="vi"?"vi-VN":"en-US";S=new Date(m.date).toLocaleDateString(M)}else S=m.date;p.innerHTML=`
                    <td>${y+1}</td>
                    <td>${m.score}</td>
                    <td>${m.moves}</td>
                    <td>${a.formatTime(m.time)}</td>
                    <td>${S}</td>
                `,f.appendChild(p)}))):u&&u.classList.add("hidden")};c.subscribe(()=>{N(),k==="RESULT"&&_()});J();</script>
  <style rel="stylesheet" crossorigin>@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap";:root{--bg-primary: #0f1419;--bg-secondary: #1a1f29;--bg-card: #1e2633;--text-primary: #e8eaed;--text-secondary: #9aa0a6;--accent-primary: #8ab4f8;--accent-secondary: #f28b82;--wood-brown: #8b4513;--pit-bg: #654321;--stone-color: #d4af37;--shadow-sm: 0 2px 4px rgba(0, 0, 0, .3);--shadow-md: 0 4px 6px rgba(0, 0, 0, .4);--shadow-lg: 0 10px 25px rgba(0, 0, 0, .5);--shadow-glow: 0 0 20px rgba(138, 180, 248, .3)}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;background:linear-gradient(135deg,var(--bg-primary) 0%,var(--bg-secondary) 100%);color:var(--text-primary);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem}#app{width:100%;max-width:1000px;margin:0 auto}h1{text-align:center;font-size:3rem;font-weight:700;margin-bottom:0;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:var(--shadow-sm)}.header-controls{display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:2rem;position:relative}.icon-btn{background:transparent;border:none;color:var(--text-secondary);cursor:pointer;padding:.5rem;border-radius:50%;transition:all .2s ease;display:flex;align-items:center;justify-content:center;width:64px;height:64px;position:absolute;left:0}.icon-btn:hover{background:var(--bg-secondary);color:var(--accent-primary);transform:translateY(-2px)}.lang-switcher{display:flex;justify-content:center;gap:.5rem;margin-bottom:2rem}.lang-btn{padding:.5rem 1rem;font-size:.875rem;font-weight:600;border:2px solid rgba(255,255,255,.1);background:var(--bg-secondary);color:var(--text-secondary);border-radius:.375rem;cursor:pointer;transition:all .2s ease;min-width:3rem}.lang-btn:hover{border-color:var(--accent-primary)}.lang-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff}.card{background:var(--bg-card);border-radius:1rem;padding:2rem;box-shadow:var(--shadow-lg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);transition:all .3s ease}.hidden{display:none!important}#menu-view h2{font-size:2rem;margin-bottom:2rem;text-align:center;color:var(--text-primary)}.menu-options{display:flex;flex-direction:column;gap:1.5rem}.option-group{display:flex;flex-direction:column;gap:.75rem}.option-group label{font-size:.9rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.mode-selector,.pit-selector,.stones-selector{display:flex;gap:1rem}.mode-btn,.pit-btn,.stones-btn{flex:1;padding:1rem;font-size:1rem;font-weight:600;border:2px solid rgba(255,255,255,.1);background:var(--bg-secondary);color:var(--text-primary);border-radius:.5rem;cursor:pointer;transition:all .2s ease}.mode-btn:hover,.pit-btn:hover,.stones-btn:hover{border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.mode-btn.active,.pit-btn.active,.stones-btn.active{background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border-color:transparent;color:#fff;box-shadow:var(--shadow-glow)}.mode-btn.disabled{opacity:.5;cursor:not-allowed}.mode-btn.disabled:hover{transform:none}button.primary{width:100%;padding:1rem 2rem;font-size:1.1rem;font-weight:700;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));color:#fff;border:none;border-radius:.5rem;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-md);margin-top:1rem}button.primary:hover{transform:translateY(-2px);box-shadow:var(--shadow-glow)}button.primary:active{transform:translateY(0)}#game-view{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.game-info{width:100%;display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--bg-secondary);border-radius:.5rem;border:1px solid rgba(255,255,255,.05);flex-wrap:wrap}.current-turn{font-size:1.2rem;font-weight:600;display:flex;align-items:center;gap:.75rem}.turn-indicator{width:24px;height:24px;border-radius:50%;border:2px solid rgba(255,255,255,.2);box-shadow:var(--shadow-sm);transition:all .3s ease;animation:pulse 2s ease-in-out infinite}.turn-indicator.player1{background:linear-gradient(135deg,#ef4444,#dc2626)}.turn-indicator.player2{background:linear-gradient(135deg,#3b82f6,#2563eb)}.move-count,.game-timer{font-size:.9rem;color:var(--text-secondary)}#board-container{width:100%;max-width:800px}.mancala-board{display:flex;gap:1rem;padding:1.5rem;background:linear-gradient(135deg,#8b4513,#654321);border-radius:1rem;box-shadow:var(--shadow-lg);border:3px solid #5c3317}.store{display:flex;align-items:center;justify-content:center;background:radial-gradient(circle,#3e2723,#1b0f0a);border-radius:50%;width:120px;height:240px;box-shadow:inset 0 4px 8px #00000080,0 4px 8px #0000004d;border:3px solid #2c1810;-webkit-user-select:none;user-select:none}.store .stone-count{font-size:2rem;font-weight:700;color:var(--stone-color);text-shadow:0 2px 4px rgba(0,0,0,.5)}.pits-area{display:flex;flex-direction:column;gap:1rem;flex:1}.pit-row{display:flex;gap:.75rem;justify-content:space-around}.pit-row.player1-pits{margin-top:auto}.pit{flex:1;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle,#40302a,#2c1810);border-radius:50%;aspect-ratio:1;min-width:80px;max-width:120px;box-shadow:inset 0 4px 8px #00000080,0 4px 8px #0000004d;border:3px solid #1b0f0a;cursor:pointer;transition:all .2s ease;-webkit-user-select:none;user-select:none}.pit.clickable{cursor:pointer;border-color:var(--accent-primary);animation:glow 2s ease-in-out infinite}.pit.clickable:hover{transform:translateY(-4px) scale(1.05);box-shadow:inset 0 4px 8px #00000080,0 8px 16px #8ab4f866}.pit .stone-count{font-size:1.5rem;font-weight:700;color:var(--stone-color);text-shadow:0 2px 4px rgba(0,0,0,.5)}.pit.last-move{box-shadow:0 0 0 4px gold,inset 0 4px 8px #00000080;animation:lastMovePulse .6s ease-out}@keyframes lastMovePulse{0%{transform:scale(1);box-shadow:0 0 0 4px gold,inset 0 4px 8px #00000080}50%{transform:scale(1.08);box-shadow:0 0 0 8px gold,0 0 20px #ffd70099,inset 0 4px 8px #00000080}to{transform:scale(1);box-shadow:0 0 0 4px gold,inset 0 4px 8px #00000080}}.stones-container{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:4px;padding:8px;width:100%;height:100%;position:relative}.stones-container.small{max-width:80px}.stones-container.large{position:relative}.stone{width:8px;height:8px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#f4d03f,#d4af37,#b8860b);box-shadow:0 2px 4px #0006,inset 0 1px 2px #ffffff4d;border:1px solid #8b7355;flex-shrink:0;animation:stonePop .3s ease}@keyframes stonePop{0%{transform:scale(0);opacity:0}50%{transform:scale(1.2)}to{transform:scale(1);opacity:1}}.store .stone{width:10px;height:10px}.stone-badge{position:absolute;bottom:4px;right:4px;background:#000c;color:var(--stone-color);font-size:1.2rem;font-weight:700;padding:4px 8px;border-radius:12px;border:2px solid var(--stone-color);min-width:32px;text-align:center;box-shadow:0 2px 4px #00000080}@keyframes glow{0%,to{box-shadow:inset 0 4px 8px #00000080,0 0 8px #8ab4f84d}50%{box-shadow:inset 0 4px 8px #00000080,0 0 20px #8ab4f899}}#result-view{text-align:center}#result-view h2{font-size:2.5rem;margin-bottom:1.5rem;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.winner-display{display:flex;align-items:center;justify-content:center;gap:1rem;margin:2rem 0;font-size:1.5rem;font-weight:600}.winner-icon{font-size:3rem;animation:bounce 1s ease infinite}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.game-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1.5rem;margin:2rem 0;padding:1.5rem;background:var(--bg-secondary);border-radius:.5rem}.stat{display:flex;flex-direction:column;align-items:center;gap:.5rem}.stat-label{font-size:.85rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.stat-value{font-size:1.5rem;font-weight:700;color:var(--accent-primary)}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.animate-fade-in{animation:fadeIn .3s ease}.consent-dialog{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:10000;display:none;align-items:center;justify-content:center;padding:1rem;animation:fadeIn .3s ease}.consent-content{background:var(--bg-card);border-radius:1rem;padding:2rem;max-width:500px;width:100%;box-shadow:var(--shadow-lg);border:1px solid rgba(255,255,255,.1)}.consent-content h3{margin:0 0 1rem;font-size:1.5rem;color:var(--text-primary)}.consent-content p{margin:0 0 1.5rem;color:var(--text-secondary);line-height:1.6}.consent-buttons{display:flex;gap:.75rem}.btn-accept,.btn-reject{flex:1;padding:.875rem 1.5rem;border-radius:.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .2s ease;border:none}.btn-accept{background:var(--accent-primary);color:#fff}.btn-accept:hover{background:var(--accent-secondary);transform:translateY(-2px)}.btn-reject{background:transparent;border:2px solid var(--text-secondary);color:var(--text-secondary)}.btn-reject:hover{border-color:var(--text-primary);color:var(--text-primary)}@media(max-width:768px){h1{font-size:2rem}.card{padding:1.5rem}.mancala-board{gap:.5rem;padding:1rem}.store{width:80px;height:180px}.store .stone-count{font-size:1.5rem}.pit{min-width:60px}.pit .stone-count{font-size:1.2rem}.game-info{flex-direction:column;gap:.75rem;text-align:center}.mode-selector,.pit-selector{flex-wrap:wrap}.game-stats{grid-template-columns:repeat(2,1fr)}}@media(max-width:480px){.mancala-board{flex-direction:column;align-items:center}.store{width:100%;max-width:100px;height:100px;border-radius:50%}.pits-area{width:100%}}.high-scores-container{width:100%;margin-top:2rem;animation:fadeIn .5s ease}#high-scores-title{font-size:1.5rem;margin-bottom:1rem;color:var(--text-primary);text-align:center}#high-scores-table{width:100%;border-collapse:collapse;background:#0003;border-radius:.5rem;overflow:hidden}#high-scores-table th,#high-scores-table td{padding:1rem;text-align:center;border-bottom:1px solid rgba(255,255,255,.05)}#high-scores-table th{background:#ffffff0d;color:var(--text-secondary);font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.05em}#high-scores-table td{color:var(--text-primary);font-size:1rem}#high-scores-table tr:last-child td{border-bottom:none}#high-scores-table tr.current-run{background:#ef444426;border-left:3px solid var(--accent-red)}#high-scores-table tr.current-run td{color:var(--accent-red);font-weight:600}</style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56G5F5W4" height="0" width="0"
            style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="app">
        <div class="header-controls">
            <button id="home-btn" class="icon-btn" aria-label="Back to Home">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </button>
            <h1 id="game-title">Mancala</h1>
        </div>

        <!-- Language Switcher -->
        <div class="lang-switcher">
            <button class="lang-btn active" data-lang="en">EN</button>
            <button class="lang-btn" data-lang="ja">JA</button>
            <button class="lang-btn" data-lang="vi">VI</button>
        </div>

        <!-- Menu View -->
        <div id="menu-view" class="card animate-fade-in">
            <h2 id="menu-title">Game Setup</h2>
            <div class="menu-options">
                <div class="option-group">
                    <label id="label-mode">Game Mode</label>
                    <div class="mode-selector">
                        <button id="mode-two-player" class="mode-btn active" data-mode="TWO_PLAYER">2 Players</button>
                        <button id="mode-vs-ai" class="mode-btn" data-mode="VS_AI">vs AI</button>
                    </div>
                </div>

                <div class="option-group difficulty-section hidden">
                    <label id="label-difficulty">Difficulty</label>
                    <div class="mode-selector">
                        <button class="mode-btn" data-difficulty="EASY" id="difficulty-easy">Easy</button>
                        <button class="mode-btn active" data-difficulty="MEDIUM" id="difficulty-medium">Medium</button>
                        <button class="mode-btn" data-difficulty="HARD" id="difficulty-hard">Hard</button>
                    </div>
                </div>

                <div class="option-group">
                    <label id="label-pit-count">Pits Per Side</label>
                    <div class="pit-selector">
                        <button class="pit-btn" data-pits="4">4</button>
                        <button class="pit-btn" data-pits="5">5</button>
                        <button class="pit-btn active" data-pits="6">6</button>
                        <button class="pit-btn" data-pits="7">7</button>
                        <button class="pit-btn" data-pits="8">8</button>
                    </div>
                </div>

                <div class="option-group">
                    <label id="label-initial-stones">Stones Per Pit</label>
                    <div class="stones-selector">
                        <button class="stones-btn" data-stones="3">3</button>
                        <button class="stones-btn active" data-stones="4">4</button>
                        <button class="stones-btn" data-stones="5">5</button>
                    </div>
                </div>

                <button id="start-btn" class="primary">Start Game</button>
            </div>
        </div>

        <!-- Game View -->
        <div id="game-view" class="card hidden animate-fade-in">
            <button id="new-game-btn" class="primary">New Game</button>
            <div class="game-info">
                <div class="current-turn">
                    <div class="turn-indicator player1"></div>
                    <span id="turn-text">Player 1's Turn</span>
                </div>
                <div class="move-count">
                    <span id="label-move">Move</span>: <span id="move-number">0</span>
                </div>
                <div class="game-timer">
                    <span id="label-time">Time</span>: <span id="game-timer">00:00</span>
                </div>
            </div>

            <div id="board-container">
                <!-- Board will be rendered here -->
            </div>
        </div>

        <!-- Result View -->
        <div id="result-view" class="card hidden animate-fade-in">
            <h2 id="result-title">Game Over!</h2>

            <div class="winner-display" id="winner-display">
                <!-- Winner info will be injected here -->
            </div>

            <div class="game-stats">
                <div class="stat">
                    <div class="stat-label" id="label-player1-score">Player 1 Score</div>
                    <div class="stat-value" id="player1-score">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label" id="label-player2-score">Player 2 Score</div>
                    <div class="stat-value" id="player2-score">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label" id="label-total-moves">Total Moves</div>
                    <div class="stat-value" id="total-moves">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label" id="label-total-time">Total Time</div>
                    <div class="stat-value" id="total-time">00:00</div>
                </div>
            </div>

            <!-- High Scores Table -->
            <div class="high-scores-container">
                <h3 id="high-scores-title">High Scores</h3>
                <table id="high-scores-table">
                    <thead>
                        <tr>
                            <th id="th-rank">Rank</th>
                            <th id="th-score">Score</th>
                            <th id="th-moves">Moves</th>
                            <th id="th-time">Time</th>
                            <th id="th-date">Date</th>
                        </tr>
                    </thead>
                    <tbody id="high-scores-body">
                        <!-- Scores injected here -->
                    </tbody>
                </table>
            </div>

            <button id="restart-btn" class="primary">Play Again</button>
        </div>
    </div>

</body>

</html>