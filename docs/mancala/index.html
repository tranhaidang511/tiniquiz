<!doctype html>
<html lang="en">

<head>
    <!-- Google Consent Mode -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied'
        });
    </script>
    <!-- End Google Consent Mode -->

    <!-- Google Tag Manager -->
    <script>
        (function (w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-56G5F5W4');
    </script>
    <!-- End Google Tag Manager -->

    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./favicon-DNhQh7h9.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mancala</title>


    <meta name="description" content="Mancala - Classic strategy board game. Collect stones to win!" />
    <meta name="keywords" content="Mancala, Kalah, board game, strategy, game" />
    <meta name="author" content="Tran Hai Dang" />
    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Mancala" />
    <meta property="og:description" content="Mancala - Classic strategy board game. Collect stones to win!" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://tiniquiz.com/mancala/" />
    <meta property="og:image" content="https://tiniquiz.com/mancala/favicon-DNhQh7h9.svg" />
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Mancala" />
    <meta name="twitter:description" content="Mancala - Classic strategy board game. Collect stones to win!" />
    <meta name="twitter:image" content="https://tiniquiz.com/mancala/favicon-DNhQh7h9.svg" />
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();class B{difficulty;maxDepth;constructor(t="MEDIUM"){this.difficulty=t,this.maxDepth=this.getMaxDepth(t)}getMaxDepth(t){switch(t){case"EASY":return 2;case"MEDIUM":return 4;case"HARD":return 6}}setDifficulty(t){this.difficulty=t,this.maxDepth=this.getMaxDepth(t)}getBestMove(t,e,n){const i=this.getValidMoves(t,e,n);if(i.length===0)return-1;if(i.length===1)return i[0];if(this.difficulty==="EASY"&&Math.random()<.3)return i[Math.floor(Math.random()*i.length)];let s=i[0],a=-1/0;for(const u of i){const d=[...t],l=this.simulateMove(d,u,e,n),m=this.minimax(d,e,this.maxDepth-1,-1/0,1/0,l?n:this.getOpponent(n),n);m>a&&(a=m,s=u)}return s}minimax(t,e,n,i,s,a,u){if(n===0||this.isGameOver(t,e))return this.evaluate(t,e,u);const d=this.getValidMoves(t,e,a);if(d.length===0)return this.evaluate(t,e,u);if(a===u){let l=-1/0;for(const m of d){const g=[...t],h=this.simulateMove(g,m,e,a),f=this.minimax(g,e,n-1,i,s,h?a:this.getOpponent(a),u);if(l=Math.max(l,f),i=Math.max(i,f),s<=i)break}return l}else{let l=1/0;for(const m of d){const g=[...t],h=this.simulateMove(g,m,e,a),f=this.minimax(g,e,n-1,i,s,h?a:this.getOpponent(a),u);if(l=Math.min(l,f),s=Math.min(s,f),s<=i)break}return l}}evaluate(t,e,n){const i=e,s=e*2+1,a=n==="PLAYER1"?i:s,u=n==="PLAYER1"?s:i;let d=(t[a]-t[u])*10;const l=n==="PLAYER1"?0:e+1,m=n==="PLAYER1"?e:e*2+1;let g=0;for(let h=l;h<m;h++)g+=t[h];d+=g*.5;for(let h=l;h<m;h++){const f=t[h];f>0&&(h+f)%t.length===a&&(d+=5)}return d}getValidMoves(t,e,n){const i=[];if(n==="PLAYER1")for(let s=0;s<e;s++)t[s]>0&&i.push(s);else for(let s=e+1;s<e*2+1;s++)t[s]>0&&i.push(s);return i}simulateMove(t,e,n,i){const s=t[e];t[e]=0;let a=e,u=s,d=e;const l=n,m=n*2+1,g=i==="PLAYER1"?m:l;for(;u>0;)a=(a+1)%t.length,a!==g&&(t[a]++,u--,d=a);const h=i==="PLAYER1"?l:m;if((i==="PLAYER1"?d<n:d>n&&d<n*2+1)&&t[d]===1&&d!==h){const p=this.getOppositeIndex(d,n),v=t[p];v>0&&(t[h]+=t[d]+v,t[d]=0,t[p]=0)}return d===h}getOppositeIndex(t,e){const n=e,i=e*2+1;return t<e?i-1-t:n-1-(t-e-1)}getOpponent(t){return t==="PLAYER1"?"PLAYER2":"PLAYER1"}isGameOver(t,e){const n=t.slice(0,e).reduce((s,a)=>s+a,0),i=t.slice(e+1,e*2+1).reduce((s,a)=>s+a,0);return n===0||i===0}}class Y{pitCount=6;initialStones=4;gameMode="TWO_PLAYER";difficulty="MEDIUM";gameState="MENU";currentPlayer="PLAYER1";board=[];moveHistory=[];winner=null;startTime=0;elapsedTime=0;timerInterval=null;lastMovePit=null;ai;aiMoveListeners=[];stateChangeListeners=[];moveListeners=[];boardUpdateListeners=[];constructor(){this.ai=new B(this.difficulty),this.initializeBoard()}initializeBoard(){const t=this.pitCount*2+2;this.board=new Array(t).fill(0);for(let e=0;e<this.pitCount;e++)this.board[e]=this.initialStones,this.board[e+this.pitCount+1]=this.initialStones;this.board[this.pitCount]=0,this.board[this.pitCount*2+1]=0}setPitCount(t){this.pitCount=t}setInitialStones(t){this.initialStones=t}getInitialStones(){return this.initialStones}setGameMode(t){this.gameMode=t}setDifficulty(t){this.difficulty=t,this.ai.setDifficulty(t)}getDifficulty(){return this.difficulty}getPitCount(){return this.pitCount}getGameMode(){return this.gameMode}getLastMovePit(){return this.lastMovePit}start(){this.initializeBoard(),this.currentPlayer="PLAYER1",this.moveHistory=[],this.winner=null,this.startTime=Date.now(),this.elapsedTime=0,this.gameState="PLAYING",this.notifyStateChange(),this.startTimer()}restart(){this.stopTimer(),this.gameState="MENU",this.notifyStateChange()}startTimer(){this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=window.setInterval(()=>{this.elapsedTime=Date.now()-this.startTime},1e3)}stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}isValidMove(t){if(this.gameState!=="PLAYING")return!1;const e=t>=0&&t<this.pitCount,n=t>this.pitCount&&t<this.pitCount*2+1;return this.currentPlayer==="PLAYER1"?e&&this.board[t]>0:n&&this.board[t]>0}makeMove(t){if(!this.isValidMove(t))return!1;this.lastMovePit=t;const e=this.board[t];this.board[t]=0;let n=t,i=e,s=t;const a=this.pitCount,u=this.pitCount*2+1,d=this.currentPlayer==="PLAYER1"?u:a;for(;i>0;)n=(n+1)%this.board.length,n!==d&&(this.board[n]++,i--,s=n);let l=!1,m=0;const g=this.currentPlayer==="PLAYER1"?a:u;if(s===g)l=!0;else if((this.currentPlayer==="PLAYER1"?s<this.pitCount:s>this.pitCount&&s<this.pitCount*2+1)&&this.board[s]===1){const p=this.getOppositeIndex(s),v=this.board[p];v>0&&(m=this.board[s]+v,this.board[g]+=m,this.board[s]=0,this.board[p]=0)}const h={player:this.currentPlayer,pitIndex:t,capturedStones:m>0?m:void 0,extraTurn:l};return this.moveHistory.push(h),this.notifyMove(h),l||this.switchPlayer(),this.checkWinCondition(),this.notifyBoardUpdate(),this.gameMode==="VS_AI"&&this.currentPlayer==="PLAYER2"&&this.gameState==="PLAYING"&&this.notifyAIMove(),!0}async makeAIMove(){if(this.gameMode!=="VS_AI"||this.currentPlayer!=="PLAYER2"||this.gameState!=="PLAYING")return;await new Promise(e=>setTimeout(e,1e3));const t=this.ai.getBestMove(this.getBoard(),this.pitCount,"PLAYER2");t!==-1&&this.makeMove(t)}getOppositeIndex(t){const e=this.pitCount,n=this.pitCount*2+1;return t<this.pitCount?n-1-t:e-1-(t-this.pitCount-1)}switchPlayer(){this.currentPlayer=this.currentPlayer==="PLAYER1"?"PLAYER2":"PLAYER1"}checkWinCondition(){const t=this.board.slice(0,this.pitCount).reduce((n,i)=>n+i,0),e=this.board.slice(this.pitCount+1,this.pitCount*2+1).reduce((n,i)=>n+i,0);if(t===0||e===0){const n=this.pitCount,i=this.pitCount*2+1;this.board[n]+=t,this.board[i]+=e;for(let s=0;s<this.pitCount;s++)this.board[s]=0,this.board[s+this.pitCount+1]=0;this.board[n]>this.board[i]?this.winner="PLAYER1":this.board[i]>this.board[n]?this.winner="PLAYER2":this.winner=null,this.endGame()}}endGame(){this.stopTimer(),this.gameState="RESULT",this.notifyStateChange()}getBoard(){return[...this.board]}getCurrentPlayer(){return this.currentPlayer}getState(){return this.gameState}getWinner(){return this.winner}getMoves(){return[...this.moveHistory]}getElapsedTime(){return this.elapsedTime}getPlayerScore(t){const e=t==="PLAYER1"?this.pitCount:this.pitCount*2+1;return this.board[e]}onStateChange(t){this.stateChangeListeners.push(t)}onMove(t){this.moveListeners.push(t)}onBoardUpdate(t){this.boardUpdateListeners.push(t)}onAIMove(t){this.aiMoveListeners.push(t)}notifyStateChange(){this.stateChangeListeners.forEach(t=>t(this.gameState))}notifyMove(t){this.moveListeners.forEach(e=>e(t))}notifyBoardUpdate(){this.boardUpdateListeners.forEach(t=>t())}notifyAIMove(){this.aiMoveListeners.forEach(t=>t())}}const r=new Y;class R{currentLang="en";listeners=[];locales;constructor(t,e="en"){this.locales=t,this.currentLang=e}get language(){return this.currentLang}setLanguage(t){this.currentLang!==t&&(this.currentLang=t,localStorage.setItem("language",t),this.notifyListeners())}subscribe(t){this.listeners.push(t)}notifyListeners(){this.listeners.forEach(t=>t(this.currentLang))}getUIText(t,e){const n=this.locales[this.currentLang]?.ui;let i=n&&n[t]||t;return e&&Object.entries(e).forEach(([s,a])=>{i=i.replace(`{${s}}`,a)}),i}}const G={ui:{gameTitle:"Mancala",gameSetup:"Game Setup",gameMode:"Game Mode",twoPlayers:"2 Players",vsAI:"vs AI",comingSoon:"Coming Soon",difficulty:"Difficulty",easy:"Easy",medium:"Medium",hard:"Hard",pitCount:"Pits Per Side",initialStones:"Stones Per Pit",startGame:"Start Game",newGame:"New Game",player1Turn:"Player 1's Turn",player2Turn:"Player 2's Turn",you:"You",ai:"AI",yourTurn:"Your Turn",aiTurn:"AI's Turn",youWin:"You Win!",aiWins:"AI Wins!",yourScore:"Your Score",aiScore:"AI Score",move:"Move",time:"Time",totalTime:"Total Time",totalMoves:"Total Moves",player1Wins:"Player 1 Wins!",player2Wins:"Player 2 Wins!",draw:"It's a Draw!",player1Score:"Player 1 Score",player2Score:"Player 2 Score",playAgain:"Play Again",highScores:"High Scores",rank:"Rank",moves:"Moves",date:"Date"}},D={ui:{gameTitle:"„Éû„É≥„Ç´„É©",gameSetup:"„Ç≤„Éº„É†Ë®≠ÂÆö",gameMode:"„Ç≤„Éº„É†„É¢„Éº„Éâ",twoPlayers:"‰∫å‰∫∫ÂØæÊà¶",vsAI:"AIÂØæÊà¶",comingSoon:"ËøëÊó•ÂÖ¨Èñã",difficulty:"Èõ£ÊòìÂ∫¶",easy:"Á∞°Âçò",medium:"ÊôÆÈÄö",hard:"Èõ£„Åó„ÅÑ",pitCount:"Á©¥„ÅÆÊï∞",initialStones:"Á©¥„Åî„Å®„ÅÆÁü≥„ÅÆÊï∞",startGame:"„Ç≤„Éº„É†ÈñãÂßã",newGame:"Êñ∞Ë¶è„Ç≤„Éº„É†",player1Turn:"„Éó„É¨„Ç§„É§„Éº1„ÅÆÁï™",player2Turn:"„Éó„É¨„Ç§„É§„Éº2„ÅÆÁï™",you:"„ÅÇ„Å™„Åü",ai:"AI",yourTurn:"„ÅÇ„Å™„Åü„ÅÆÁï™",aiTurn:"AI„ÅÆÁï™",youWin:"„ÅÇ„Å™„Åü„ÅÆÂãùÂà©ÔºÅ",aiWins:"AI„ÅÆÂãùÂà©ÔºÅ",yourScore:"„ÅÇ„Å™„Åü„ÅÆ„Çπ„Ç≥„Ç¢",aiScore:"AI„Çπ„Ç≥„Ç¢",move:"ÊâãÊï∞",time:"ÊôÇÈñì",totalTime:"ÂêàË®àÊôÇÈñì",totalMoves:"ÂêàË®àÊâãÊï∞",player1Wins:"„Éó„É¨„Ç§„É§„Éº1„ÅÆÂãùÂà©ÔºÅ",player2Wins:"„Éó„É¨„Ç§„É§„Éº2„ÅÆÂãùÂà©ÔºÅ",draw:"Âºï„ÅçÂàÜ„ÅëÔºÅ",player1Score:"„Éó„É¨„Ç§„É§„Éº1„Çπ„Ç≥„Ç¢",player2Score:"„Éó„É¨„Ç§„É§„Éº2„Çπ„Ç≥„Ç¢",playAgain:"„ÇÇ„ÅÜ‰∏ÄÂ∫¶",highScores:"„Éè„Ç§„Çπ„Ç≥„Ç¢",rank:"È†Ü‰Ωç",moves:"ÊâãÊï∞",date:"Êó•‰ªò"}},N={ui:{gameTitle:"Mancala",gameSetup:"Thi·∫øt l·∫≠p tr√≤ ch∆°i",gameMode:"Ch·∫ø ƒë·ªô ch∆°i",twoPlayers:"2 Ng∆∞·ªùi ch∆°i",vsAI:"ƒê·∫•u v·ªõi AI",comingSoon:"S·∫Øp ra m·∫Øt",difficulty:"ƒê·ªô kh√≥",easy:"D·ªÖ",medium:"Trung b√¨nh",hard:"Kh√≥",pitCount:"S·ªë h·ªë m·ªói b√™n",initialStones:"S·ªë ƒë√° m·ªói h·ªë",startGame:"B·∫Øt ƒë·∫ßu",newGame:"V√°n m·ªõi",player1Turn:"L∆∞·ª£t Ng∆∞·ªùi ch∆°i 1",player2Turn:"L∆∞·ª£t Ng∆∞·ªùi ch∆°i 2",you:"B·∫°n",ai:"AI",yourTurn:"L∆∞·ª£t c·ªßa b·∫°n",aiTurn:"L∆∞·ª£t AI",youWin:"B·∫°n th·∫Øng!",aiWins:"AI th·∫Øng!",yourScore:"ƒêi·ªÉm c·ªßa b·∫°n",aiScore:"ƒêi·ªÉm AI",move:"N∆∞·ªõc",time:"Th·ªùi gian",totalTime:"T·ªïng th·ªùi gian",totalMoves:"T·ªïng s·ªë n∆∞·ªõc",player1Wins:"Ng∆∞·ªùi ch∆°i 1 th·∫Øng!",player2Wins:"Ng∆∞·ªùi ch∆°i 2 th·∫Øng!",draw:"H√≤a!",player1Score:"ƒêi·ªÉm Ng∆∞·ªùi ch∆°i 1",player2Score:"ƒêi·ªÉm Ng∆∞·ªùi ch∆°i 2",playAgain:"Ch∆°i l·∫°i",highScores:"ƒêi·ªÉm cao",rank:"H·∫°ng",moves:"N∆∞·ªõc",date:"Ng√†y"}};class _{dialog;STORAGE_KEY="consentMode";constructor(){this.dialog=document.createElement("div"),this.dialog.className="consent-dialog",this.dialog.innerHTML=`
            <div class="consent-content">
                <h3>We value your privacy</h3>
                <p>We use cookies to improve your experience, analyze traffic, and show relevant ads.</p>
                <p>You can choose to accept or reject these cookies.</p>
                <p>Essential cookies are always on because they are required for the site to work.</p>
                <div class="consent-buttons">
                    <button id="btn-reject" class="btn-reject">Reject All</button>
                    <button id="btn-accept" class="btn-accept">Accept All</button>
                </div>
            </div>
        `,document.body.appendChild(this.dialog),this.init()}init(){const t=localStorage.getItem(this.STORAGE_KEY);t?this.updateConsent(t==="granted"):this.showDialog(),this.dialog.querySelector("#btn-accept")?.addEventListener("click",()=>{this.setConsent(!0)}),this.dialog.querySelector("#btn-reject")?.addEventListener("click",()=>{this.setConsent(!1)})}showDialog(){this.dialog.style.display="flex"}hideDialog(){this.dialog.style.display="none"}setConsent(t){localStorage.setItem(this.STORAGE_KEY,t?"granted":"denied"),this.updateConsent(t),this.hideDialog()}updateConsent(t){const e=t?"granted":"denied";typeof window.gtag=="function"&&window.gtag("consent","update",{ad_storage:e,ad_user_data:e,ad_personalization:e,analytics_storage:e})}}class W{formatTime(t){const e=Math.floor(t/1e3),n=Math.floor(e/60),i=e%60;return`${n}:${i.toString().padStart(2,"0")}`}formatDate(t,e){if(typeof t=="number"){const n=e==="vi"?"vi-VN":e==="ja"?"ja-JP":"en-US";return new Date(t).toLocaleDateString(n)}return t}saveHighScore(t,e,n,i=5){try{const s=localStorage.getItem(t);let a=s?JSON.parse(s):[];a.push(e),a.sort(n),a=a.slice(0,i),localStorage.setItem(t,JSON.stringify(a))}catch(s){console.error(`Failed to save high score (key: ${t}):`,s)}}getHighScores(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch(e){return console.error(`Failed to load high scores (key: ${t}):`,e),[]}}}const S=new W;new _;const k=localStorage.getItem("language"),c=new R({en:G,ja:D,vi:N},k||"en"),O=()=>{V(),A(),document.querySelectorAll(".lang-btn").forEach(o=>{o.classList.toggle("active",o.dataset.lang===c.language)}),H()},q=()=>{const o=document.querySelector(".mode-btn.active:not([data-difficulty])"),t=document.querySelector(".mode-btn.active[data-difficulty]"),e=document.querySelector(".pit-btn.active"),n=document.querySelector(".stones-btn.active");if(o&&e&&n){const i={mode:o.dataset.mode,difficulty:t?t.dataset.difficulty:"MEDIUM",pits:e.dataset.pits,stones:n.dataset.stones};localStorage.setItem("mancala_setup",JSON.stringify(i))}},H=()=>{try{const o=localStorage.getItem("mancala_setup");if(o){const{mode:t,difficulty:e,pits:n,stones:i}=JSON.parse(o);t&&document.querySelectorAll(".mode-btn:not(.disabled)").forEach(s=>{if(s.dataset.mode===t){s.classList.add("active"),r.setGameMode(t);const u=document.querySelector(".difficulty-section");u&&(t==="VS_AI"?u.classList.remove("hidden"):u.classList.add("hidden"))}else s.classList.remove("active")}),n&&document.querySelectorAll(".pit-btn").forEach(s=>{s.dataset.pits===n?(s.classList.add("active"),r.setPitCount(parseInt(n))):s.classList.remove("active")}),e&&document.querySelectorAll(".mode-btn[data-difficulty]").forEach(s=>{s.dataset.difficulty===e?(s.classList.add("active"),r.setDifficulty(e)):s.classList.remove("active")}),i&&document.querySelectorAll(".stones-btn").forEach(s=>{s.dataset.stones===i?(s.classList.add("active"),r.setInitialStones(parseInt(i))):s.classList.remove("active")})}}catch(o){console.error("Failed to load Mancala setup:",o)}},A=()=>{document.getElementById("game-title").textContent=c.getUIText("gameTitle"),document.getElementById("menu-title").textContent=c.getUIText("gameSetup"),document.getElementById("label-mode").textContent=c.getUIText("gameMode"),document.getElementById("mode-two-player").textContent=c.getUIText("twoPlayers"),document.getElementById("mode-vs-ai").textContent=c.getUIText("vsAI"),document.getElementById("label-difficulty").textContent=c.getUIText("difficulty"),document.getElementById("difficulty-easy").textContent=c.getUIText("easy"),document.getElementById("difficulty-medium").textContent=c.getUIText("medium"),document.getElementById("difficulty-hard").textContent=c.getUIText("hard"),document.getElementById("label-pit-count").textContent=c.getUIText("pitCount"),document.getElementById("label-initial-stones").textContent=c.getUIText("initialStones"),document.getElementById("start-btn").textContent=c.getUIText("startGame"),document.getElementById("new-game-btn").textContent=c.getUIText("newGame"),document.getElementById("label-move").textContent=c.getUIText("move"),document.getElementById("label-time").textContent=c.getUIText("time"),document.getElementById("label-total-moves").textContent=c.getUIText("totalMoves"),document.getElementById("label-total-time").textContent=c.getUIText("totalTime"),document.getElementById("restart-btn").textContent=c.getUIText("playAgain");const o=document.getElementById("label-player1-score");if(o){const e=r.getGameMode()==="VS_AI";o.textContent=e?c.getUIText("yourScore"):c.getUIText("player1Score")}const t=document.getElementById("label-player2-score");if(t){const e=r.getGameMode()==="VS_AI";t.textContent=e?c.getUIText("aiScore"):c.getUIText("player2Score")}document.getElementById("high-scores-title").textContent=c.getUIText("highScores"),document.getElementById("th-rank").textContent=c.getUIText("rank"),document.getElementById("th-score").textContent=c.getUIText("yourScore"),document.getElementById("th-moves").textContent=c.getUIText("moves"),document.getElementById("th-time").textContent=c.getUIText("time"),document.getElementById("th-date").textContent=c.getUIText("date"),I()},V=()=>{document.getElementById("home-btn")?.addEventListener("click",()=>{window.location.href="/"}),document.querySelectorAll(".lang-btn").forEach(o=>{o.addEventListener("click",t=>{const e=t.target.dataset.lang;c.setLanguage(e),document.querySelectorAll(".lang-btn").forEach(n=>n.classList.remove("active")),t.target.classList.add("active")})}),document.querySelectorAll(".mode-btn:not([data-difficulty])").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=e.dataset.mode;document.querySelectorAll(".mode-btn:not([data-difficulty])").forEach(s=>s.classList.remove("active")),e.classList.add("active"),r.setGameMode(n);const i=document.querySelector(".difficulty-section");i&&(n==="VS_AI"?i.classList.remove("hidden"):i.classList.add("hidden"))})}),document.querySelectorAll(".mode-btn[data-difficulty]").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=e.dataset.difficulty;document.querySelectorAll(".mode-btn[data-difficulty]").forEach(i=>i.classList.remove("active")),e.classList.add("active"),r.setDifficulty(n)})}),document.querySelectorAll(".pit-btn").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=parseInt(e.dataset.pits||"6");document.querySelectorAll(".pit-btn").forEach(i=>i.classList.remove("active")),e.classList.add("active"),r.setPitCount(n)})}),document.querySelectorAll(".stones-btn").forEach(o=>{o.addEventListener("click",t=>{const e=t.target,n=parseInt(e.dataset.stones||"4");document.querySelectorAll(".stones-btn").forEach(i=>i.classList.remove("active")),e.classList.add("active"),r.setInitialStones(n)})}),document.getElementById("start-btn")?.addEventListener("click",()=>{q(),r.start()}),document.getElementById("new-game-btn")?.addEventListener("click",()=>{r.restart()}),document.getElementById("restart-btn")?.addEventListener("click",()=>{r.restart()})},M=o=>{if(o===0)return"";if(o<=16){const e=[];for(let n=0;n<o;n++)e.push('<div class="stone"></div>');return`<div class="stones-container small">${e.join("")}</div>`}const t=[];for(let e=0;e<16;e++)t.push('<div class="stone"></div>');return`
        <div class="stones-container large">
            ${t.join("")}
            <div class="stone-badge">${o}</div>
        </div>
    `},E=()=>{const o=document.getElementById("board-container");if(!o)return;o.innerHTML="";const t=r.getPitCount(),e=r.getBoard(),n=document.createElement("div");n.className="mancala-board";const i=document.createElement("div");i.className="store player2-store",i.innerHTML=M(e[t*2+1]),n.appendChild(i);const s=document.createElement("div");s.className="pits-area";const a=document.createElement("div");a.className="pit-row player2-pits";for(let l=t*2;l>t;l--){const m=T(e[l],l,"PLAYER2");a.appendChild(m)}s.appendChild(a);const u=document.createElement("div");u.className="pit-row player1-pits";for(let l=0;l<t;l++){const m=T(e[l],l,"PLAYER1");u.appendChild(m)}s.appendChild(u),n.appendChild(s);const d=document.createElement("div");d.className="store player1-store",d.innerHTML=M(e[t]),n.appendChild(d),o.appendChild(n)},T=(o,t,e)=>{const n=document.createElement("div");return n.className="pit",n.dataset.index=t.toString(),n.dataset.owner=e,r.getLastMovePit()===t&&n.classList.add("last-move"),n.innerHTML=M(o),n.addEventListener("click",()=>{$(t)}),(r.getGameMode()==="VS_AI"?e==="PLAYER1"&&r.isValidMove(t):r.isValidMove(t))&&n.classList.add("clickable"),n},$=o=>{r.makeMove(o)&&(E(),I())},I=()=>{const o=document.querySelector(".turn-indicator"),t=document.getElementById("turn-text"),e=document.getElementById("move-number"),n=document.getElementById("game-timer"),i=r.getCurrentPlayer(),s=r.getMoves();o&&(o.className=`turn-indicator ${i.toLowerCase()}`),t&&(r.getGameMode()==="VS_AI"?t.textContent=i==="PLAYER1"?c.getUIText("yourTurn"):c.getUIText("aiTurn"):t.textContent=i==="PLAYER1"?c.getUIText("player1Turn"):c.getUIText("player2Turn")),e&&(e.textContent=s.length.toString()),n&&(n.textContent=S.formatTime(r.getElapsedTime()))},L=o=>{["menu-view","game-view","result-view"].forEach(t=>{const e=document.getElementById(t);e&&(t===o?e.classList.remove("hidden"):e.classList.add("hidden"))})};let x="MENU",y=null;r.onStateChange(o=>{x=o,o==="MENU"&&(L("menu-view"),y&&(clearInterval(y),y=null)),o==="PLAYING"&&(L("game-view"),E(),I(),y&&clearInterval(y),y=window.setInterval(()=>{I()},1e3)),o==="RESULT"&&(L("result-view"),y&&(clearInterval(y),y=null),y&&(clearInterval(y),y=null),j(),C())});r.onMove(()=>{E(),I()});r.onBoardUpdate(()=>{E()});r.onAIMove(()=>{r.makeAIMove()});const j=()=>{const o=r.getWinner();if(r.getGameMode()!=="VS_AI"||o!=="PLAYER1")return;const t=r.getPlayerScore("PLAYER1"),e=r.getMoves().length,n=r.getElapsedTime(),i=Date.now(),s=r.getPitCount(),a=r.getDifficulty(),u=r.getInitialStones(),d={score:t,moves:e,time:n,date:i},l=`mancala_highscores_${a}_${s}_${u}`;S.saveHighScore(l,d,(m,g)=>m.score!==g.score?g.score-m.score:m.moves!==g.moves?m.moves-g.moves:m.time-g.time)},z=()=>{if(r.getGameMode()!=="VS_AI")return[];const o=r.getPitCount(),t=r.getDifficulty(),e=r.getInitialStones(),n=`mancala_highscores_${t}_${o}_${e}`;return S.getHighScores(n)},C=()=>{const o=r.getWinner(),t=document.getElementById("winner-display"),e=document.getElementById("player1-score"),n=document.getElementById("player2-score"),i=document.getElementById("total-moves"),s=document.getElementById("total-time"),a=document.getElementById("result-title"),u=r.getGameMode()==="VS_AI",d=document.getElementById("label-player1-score");d&&(d.textContent=u?c.getUIText("yourScore"):c.getUIText("player1Score"));const l=document.getElementById("label-player2-score");if(l&&(l.textContent=u?c.getUIText("aiScore"):c.getUIText("player2Score")),e&&(e.textContent=r.getPlayerScore("PLAYER1").toString()),n&&(n.textContent=r.getPlayerScore("PLAYER2").toString()),i&&(i.textContent=r.getMoves().length.toString()),s&&(s.textContent=S.formatTime(r.getElapsedTime())),o){if(a&&(r.getGameMode()==="VS_AI"?a.textContent=o==="PLAYER1"?c.getUIText("youWin"):c.getUIText("aiWins"):a.textContent=o==="PLAYER1"?c.getUIText("player1Wins"):c.getUIText("player2Wins")),t){const p=r.getGameMode()==="VS_AI"?o==="PLAYER1"?c.getUIText("youWin"):c.getUIText("aiWins"):o==="PLAYER1"?c.getUIText("player1Wins"):c.getUIText("player2Wins");t.innerHTML=`
                <div class="winner-icon ${o.toLowerCase()}">üèÜ</div>
                <span>${p}</span>
            `}}else a&&(a.textContent=c.getUIText("draw")),t&&(t.innerHTML=`<span>${c.getUIText("draw")}</span>`);const m=z(),g=document.getElementById("high-scores-body"),h=document.querySelector(".high-scores-container");r.getGameMode()==="VS_AI"?(h&&h.classList.remove("hidden"),g&&(g.innerHTML="",m.forEach((f,p)=>{const v=document.createElement("tr"),P=r.getPlayerScore("PLAYER1"),b=r.getMoves().length,w=r.getElapsedTime();o==="PLAYER1"&&f.score===P&&f.moves===b&&f.time===w&&typeof f.date=="number"&&Date.now()-f.date<1e3&&v.classList.add("current-run");const U=S.formatDate(f.date,c.language);v.innerHTML=`
                    <td>${p+1}</td>
                    <td>${f.score}</td>
                    <td>${f.moves}</td>
                    <td>${S.formatTime(f.time)}</td>
                    <td>${U}</td>
                `,g.appendChild(v)}))):h&&h.classList.add("hidden")};c.subscribe(()=>{A(),x==="RESULT"&&C()});O();</script>
  <style rel="stylesheet" crossorigin>@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap";*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;background:linear-gradient(135deg,var(--bg-primary) 0%,var(--bg-secondary) 100%);color:var(--text-primary);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem}.header-controls{display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:2rem;position:relative}.icon-btn{background:transparent;border:none;color:var(--text-secondary);cursor:pointer;padding:.5rem;border-radius:50%;transition:all .2s ease;display:flex;align-items:center;justify-content:center;width:64px;height:64px;position:absolute;left:0}.icon-btn:hover{background:var(--bg-secondary);color:var(--accent-primary);transform:translateY(-2px)}.lang-switcher{display:flex;justify-content:center;gap:.5rem;margin-bottom:2rem}.lang-btn{padding:.5rem 1rem;font-size:.875rem;font-weight:600;border:2px solid rgba(138,180,248,.3);background:var(--bg-secondary);color:var(--text-secondary);border-radius:.375rem;cursor:pointer;transition:all .2s ease;min-width:3rem;width:auto}.lang-btn:hover{border-color:var(--accent-primary)}.lang-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff}.card{background:var(--bg-card);border-radius:1rem;padding:2rem;box-shadow:var(--shadow-lg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}.hidden{display:none!important}#menu-view h2{font-size:2rem;margin-bottom:2rem;text-align:center;color:var(--text-primary)}.setup-group{margin-bottom:1.5rem}.setup-group h3{font-size:1rem;color:var(--text-secondary);margin-bottom:.75rem;text-transform:uppercase;letter-spacing:.05em;font-weight:600}.radio-group{display:flex;gap:.5rem;background:var(--bg-secondary);padding:.25rem;border-radius:.5rem}.radio-label{flex:1;position:relative;cursor:pointer}.radio-label input{position:absolute;opacity:0;cursor:pointer}.radio-label span{display:block;padding:.75rem;text-align:center;border-radius:.375rem;color:var(--text-secondary);font-weight:600;transition:all .2s ease}.radio-label input:checked+span{background:var(--accent-primary);color:#fff;box-shadow:var(--shadow-sm)}.checkbox-label{display:flex;align-items:center;gap:.75rem;cursor:pointer;padding:.75rem;background:var(--bg-secondary);border-radius:.5rem;transition:all .2s ease}.checkbox-label:hover{background:#ffffff0d}.checkbox-label input{width:1.25rem;height:1.25rem;accent-color:var(--accent-primary);cursor:pointer}.checkbox-label span{color:var(--text-primary);font-weight:500}button.primary{width:100%;padding:1rem 2rem;font-size:1.1rem;font-weight:700;background:linear-gradient(135deg,var(--accent-red),var(--accent-primary));color:#fff;border:none;border-radius:.5rem;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-md);margin-top:1rem}#game-view{display:flex;flex-direction:column;align-items:center;gap:1.5rem}#result-view{text-align:center}#result-view h2{font-size:2.5rem;margin-bottom:1.5rem;background:linear-gradient(135deg,var(--accent-red),var(--accent-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.high-scores-container{width:100%;margin-top:2rem;animation:fadeIn .5s ease}#high-scores-title{font-size:1.5rem;margin-bottom:1rem;color:var(--text-primary);text-align:center}#high-scores-table{width:100%;border-collapse:collapse;background:#0003;border-radius:.5rem;overflow:hidden}#high-scores-table th,#high-scores-table td{padding:1rem;text-align:center;border-bottom:1px solid rgba(255,255,255,.05)}#high-scores-table th{background:#ffffff0d;color:var(--text-secondary);font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.05em}#high-scores-table td{color:var(--text-primary);font-size:1rem}#high-scores-table tr:last-child td{border-bottom:none}#high-scores-table tr.current-run{background:#ef444426;border-left:3px solid var(--accent-red)}#high-scores-table tr.current-run td{color:var(--accent-red);font-weight:600}.consent-dialog{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:10000;display:none;align-items:center;justify-content:center;padding:1rem;animation:fadeIn .3s ease}.consent-content{background:var(--bg-secondary);border-radius:1rem;padding:2rem;max-width:500px;width:100%;box-shadow:var(--shadow-lg);border:1px solid rgba(255,255,255,.1);animation:slideUp .3s ease}.consent-content h3{margin:0 0 1rem;font-size:1.5rem;color:var(--text-primary)}.consent-content p{margin:0 0 1.5rem;color:var(--text-secondary);line-height:1.6}.consent-buttons{display:flex;gap:.75rem;flex-wrap:wrap}.btn-accept,.btn-reject{flex:1;min-width:120px;padding:.875rem 1.5rem;border-radius:.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .2s ease;border:none}.btn-accept{background:var(--accent-primary);color:#fff}.btn-accept:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.btn-reject{background:transparent;border:2px solid var(--text-secondary);color:var(--text-secondary)}.btn-reject:hover{border-color:var(--text-primary);color:var(--text-primary);background:#ffffff0d}@keyframes slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media(max-width:640px){.consent-content{padding:1.5rem}.consent-buttons{flex-direction:column}.btn-accept,.btn-reject{width:100%}}:root{--bg-primary: #0f1419;--bg-secondary: #1a1f29;--bg-card: #1e2633;--text-primary: #e8eaed;--text-secondary: #9aa0a6;--accent-primary: #8ab4f8;--accent-secondary: #f28b82;--wood-brown: #8b4513;--pit-bg: #654321;--stone-color: #d4af37;--shadow-sm: 0 2px 4px rgba(0, 0, 0, .3);--shadow-md: 0 4px 6px rgba(0, 0, 0, .4);--shadow-lg: 0 10px 25px rgba(0, 0, 0, .5);--shadow-glow: 0 0 20px rgba(138, 180, 248, .3)}#app{width:100%;max-width:1000px;margin:0 auto}h1{text-align:center;font-size:3rem;font-weight:700;margin-bottom:0;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:var(--shadow-sm)}.mode-btn,.pit-btn,.stones-btn{flex:1;padding:1rem;font-size:1rem;font-weight:600;border:2px solid rgba(255,255,255,.1);background:var(--bg-secondary);color:var(--text-primary);border-radius:.5rem;cursor:pointer;transition:all .2s ease}.mode-btn:hover,.pit-btn:hover,.stones-btn:hover{border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.mode-btn.active,.pit-btn.active,.stones-btn.active{background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border-color:transparent;color:#fff;box-shadow:var(--shadow-glow)}.mode-btn.disabled{opacity:.5;cursor:not-allowed}.mode-btn.disabled:hover{transform:none}button.primary{width:100%;padding:1rem 2rem;font-size:1.1rem;font-weight:700;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));color:#fff;border:none;border-radius:.5rem;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-md);margin-top:1rem}button.primary:hover{transform:translateY(-2px);box-shadow:var(--shadow-glow)}button.primary:active{transform:translateY(0)}.game-info{width:100%;display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--bg-secondary);border-radius:.5rem;border:1px solid rgba(255,255,255,.05);flex-wrap:wrap}.current-turn{font-size:1.2rem;font-weight:600;display:flex;align-items:center;gap:.75rem}.turn-indicator{width:24px;height:24px;border-radius:50%;border:2px solid rgba(255,255,255,.2);box-shadow:var(--shadow-sm);transition:all .3s ease;animation:pulse 2s ease-in-out infinite}.turn-indicator.player1{background:linear-gradient(135deg,#ef4444,#dc2626)}.turn-indicator.player2{background:linear-gradient(135deg,#3b82f6,#2563eb)}.move-count,.game-timer{font-size:.9rem;color:var(--text-secondary)}#board-container{width:100%;max-width:800px}.mancala-board{display:flex;gap:1rem;padding:1.5rem;background:linear-gradient(135deg,#8b4513,#654321);border-radius:1rem;box-shadow:var(--shadow-lg);border:3px solid #5c3317}.store{display:flex;align-items:center;justify-content:center;background:radial-gradient(circle,#3e2723,#1b0f0a);border-radius:50%;width:120px;height:240px;box-shadow:inset 0 4px 8px #00000080,0 4px 8px #0000004d;border:3px solid #2c1810;-webkit-user-select:none;user-select:none}.store .stone-count{font-size:2rem;font-weight:700;color:var(--stone-color);text-shadow:0 2px 4px rgba(0,0,0,.5)}.pits-area{display:flex;flex-direction:column;gap:1rem;flex:1}.pit-row{display:flex;gap:.75rem;justify-content:space-around}.pit-row.player1-pits{margin-top:auto}.pit{flex:1;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle,#40302a,#2c1810);border-radius:50%;aspect-ratio:1;min-width:80px;max-width:120px;box-shadow:inset 0 4px 8px #00000080,0 4px 8px #0000004d;border:3px solid #1b0f0a;cursor:pointer;transition:all .2s ease;-webkit-user-select:none;user-select:none}.pit.clickable{cursor:pointer;border-color:var(--accent-primary);animation:glow 2s ease-in-out infinite}.pit.clickable:hover{transform:translateY(-4px) scale(1.05);box-shadow:inset 0 4px 8px #00000080,0 8px 16px #8ab4f866}.pit .stone-count{font-size:1.5rem;font-weight:700;color:var(--stone-color);text-shadow:0 2px 4px rgba(0,0,0,.5)}.pit.last-move{box-shadow:0 0 0 4px gold,inset 0 4px 8px #00000080;animation:lastMovePulse .6s ease-out}@keyframes lastMovePulse{0%{transform:scale(1);box-shadow:0 0 0 4px gold,inset 0 4px 8px #00000080}50%{transform:scale(1.08);box-shadow:0 0 0 8px gold,0 0 20px #ffd70099,inset 0 4px 8px #00000080}to{transform:scale(1);box-shadow:0 0 0 4px gold,inset 0 4px 8px #00000080}}.stones-container{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:4px;padding:8px;width:100%;height:100%;position:relative}.stones-container.small{max-width:80px}.stones-container.large{position:relative}.stone{width:8px;height:8px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#f4d03f,#d4af37,#b8860b);box-shadow:0 2px 4px #0006,inset 0 1px 2px #ffffff4d;border:1px solid #8b7355;flex-shrink:0;animation:stonePop .3s ease}@keyframes stonePop{0%{transform:scale(0);opacity:0}50%{transform:scale(1.2)}to{transform:scale(1);opacity:1}}.store .stone{width:8px;height:8px}.stone-badge{position:absolute;bottom:4px;right:4px;background:#000c;color:var(--stone-color);font-size:1.2rem;font-weight:700;padding:4px 8px;border-radius:12px;border:2px solid var(--stone-color);min-width:32px;text-align:center;box-shadow:0 2px 4px #00000080}@keyframes glow{0%,to{box-shadow:inset 0 4px 8px #00000080,0 0 8px #8ab4f84d}50%{box-shadow:inset 0 4px 8px #00000080,0 0 20px #8ab4f899}}.winner-display{display:flex;align-items:center;justify-content:center;gap:1rem;margin:2rem 0;font-size:1.5rem;font-weight:600}.winner-icon{font-size:3rem;animation:bounce 1s ease infinite}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.game-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1.5rem;margin:2rem 0;padding:1.5rem;background:var(--bg-secondary);border-radius:.5rem}.stat{display:flex;flex-direction:column;align-items:center;gap:.5rem}.stat-label{font-size:.85rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.stat-value{font-size:1.5rem;font-weight:700;color:var(--accent-primary)}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.animate-fade-in{animation:fadeIn .3s ease}@media(max-width:768px){h1{font-size:2rem}.card{padding:1.5rem}.mancala-board{gap:.5rem;padding:1rem}.pits-area{height:180px;justify-content:space-between}.store{width:80px;height:180px;flex-shrink:0}.store .stone-count{font-size:1.5rem}.pit{min-width:50px;max-width:70px}.pit .stone-count{font-size:1.2rem}.game-info{flex-direction:column;gap:.75rem;text-align:center}.mode-selector,.pit-selector{flex-wrap:wrap}.game-stats{grid-template-columns:repeat(2,1fr)}}@media(max-width:480px){.mancala-board{flex-direction:column;align-items:stretch;gap:.75rem;padding:.75rem}.pits-area{width:100%;order:1;gap:.25rem}.pit-row.player2-pits{order:-1;gap:.25rem}.pit-row.player1-pits{order:1;gap:.25rem}.pit{min-width:40px;max-width:60px}.pit .stone-count{font-size:.9rem}.stone,.store .stone{width:6px;height:6px}.store{width:80px;height:80px;border-radius:50%}.store .stone-count{font-size:1.25rem}.store:first-of-type{order:0;justify-self:start}.store:last-of-type{order:0;justify-self:end}.mancala-board{display:grid;grid-template-columns:1fr 1fr;grid-template-areas:"pit2 pit2" "store1 store2" "pit1 pit1";gap:.75rem}.pit-row.player2-pits{grid-area:pit2}.store:first-of-type{grid-area:store1}.store:last-of-type{grid-area:store2}.pit-row.player1-pits{grid-area:pit1}.pits-area{display:contents}}</style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56G5F5W4" height="0" width="0"
            style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="app">
        <div class="header-controls">
            <button id="home-btn" class="icon-btn" aria-label="Back to Home">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </button>
            <h1 id="game-title">Mancala</h1>
        </div>

        <!-- Language Switcher -->
        <div class="lang-switcher">
            <button class="lang-btn active" data-lang="en">EN</button>
            <button class="lang-btn" data-lang="ja">JA</button>
            <button class="lang-btn" data-lang="vi">VI</button>
        </div>

        <!-- Menu View -->
        <div id="menu-view" class="card animate-fade-in">
            <h2 id="menu-title">Game Setup</h2>
            <div class="setup-group">
                <h3 id="label-mode">Game Mode</h3>
                <div class="radio-group">
                    <button id="mode-two-player" class="mode-btn active" data-mode="TWO_PLAYER">2 Players</button>
                    <button id="mode-vs-ai" class="mode-btn" data-mode="VS_AI">vs AI</button>
                </div>
            </div>

            <div class="setup-group difficulty-section hidden">
                <h3 id="label-difficulty">Difficulty</h3>
                <div class="radio-group">
                    <button class="mode-btn" data-difficulty="EASY" id="difficulty-easy">Easy</button>
                    <button class="mode-btn active" data-difficulty="MEDIUM" id="difficulty-medium">Medium</button>
                    <button class="mode-btn" data-difficulty="HARD" id="difficulty-hard">Hard</button>
                </div>
            </div>

            <div class="setup-group">
                <h3 id="label-pit-count">Pits Per Side</h3>
                <div class="radio-group">
                    <button class="pit-btn" data-pits="4">4</button>
                    <button class="pit-btn" data-pits="5">5</button>
                    <button class="pit-btn active" data-pits="6">6</button>
                    <button class="pit-btn" data-pits="7">7</button>
                    <button class="pit-btn" data-pits="8">8</button>
                </div>
            </div>

            <div class="setup-group">
                <h3 id="label-initial-stones">Stones Per Pit</h3>
                <div class="radio-group">
                    <button class="stones-btn" data-stones="3">3</button>
                    <button class="stones-btn active" data-stones="4">4</button>
                    <button class="stones-btn" data-stones="5">5</button>
                </div>
            </div>

            <button id="start-btn" class="primary">Start Game</button>
        </div>

        <!-- Game View -->
        <div id="game-view" class="card hidden animate-fade-in">
            <button id="new-game-btn" class="primary">New Game</button>
            <div class="game-info">
                <div class="current-turn">
                    <div class="turn-indicator player1"></div>
                    <span id="turn-text">Player 1's Turn</span>
                </div>
                <div class="move-count">
                    <span id="label-move">Move</span>: <span id="move-number">0</span>
                </div>
                <div class="game-timer">
                    <span id="label-time">Time</span>: <span id="game-timer">00:00</span>
                </div>
            </div>

            <div id="board-container">
                <!-- Board will be rendered here -->
            </div>
        </div>

        <!-- Result View -->
        <div id="result-view" class="card hidden animate-fade-in">
            <h2 id="result-title">Game Over!</h2>

            <div class="winner-display" id="winner-display">
                <!-- Winner info will be injected here -->
            </div>

            <div class="game-stats">
                <div class="stat">
                    <div class="stat-label" id="label-player1-score">Player 1 Score</div>
                    <div class="stat-value" id="player1-score">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label" id="label-player2-score">Player 2 Score</div>
                    <div class="stat-value" id="player2-score">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label" id="label-total-moves">Total Moves</div>
                    <div class="stat-value" id="total-moves">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label" id="label-total-time">Total Time</div>
                    <div class="stat-value" id="total-time">00:00</div>
                </div>
            </div>

            <!-- High Scores Table -->
            <div class="high-scores-container">
                <h3 id="high-scores-title">High Scores</h3>
                <table id="high-scores-table">
                    <thead>
                        <tr>
                            <th id="th-rank">Rank</th>
                            <th id="th-score">Score</th>
                            <th id="th-moves">Moves</th>
                            <th id="th-time">Time</th>
                            <th id="th-date">Date</th>
                        </tr>
                    </thead>
                    <tbody id="high-scores-body">
                        <!-- Scores injected here -->
                    </tbody>
                </table>
            </div>

            <button id="restart-btn" class="primary">Play Again</button>
        </div>
    </div>

</body>

</html>