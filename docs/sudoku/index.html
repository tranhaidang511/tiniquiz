<!doctype html>
<html lang="en">

<head>
    <!-- Google Consent Mode -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied'
        });
    </script>
    <!-- End Google Consent Mode -->

    <!-- Google Tag Manager -->
    <script>
        (function (w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-56G5F5W4');
    </script>
    <!-- End Google Tag Manager -->

    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./favicon-CivhmDyX.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sudoku</title>


    <meta name="description" content="Sudoku - Classic number puzzle game. Fill the grid with numbers 1-9!" />
    <meta name="keywords" content="Sudoku, puzzle, number game, brain teaser, logic" />
    <meta name="author" content="Tran Hai Dang" />

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Sudoku" />
    <meta property="og:description" content="Classic Sudoku puzzle game. Fill the grid with numbers 1-9!" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://tiniquiz.com/sudoku/" />
    <meta property="og:image" content="https://tiniquiz.com/sudoku/favicon-CivhmDyX.svg" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Sudoku" />
    <meta name="twitter:description" content="Classic Sudoku puzzle game. Fill the grid with numbers 1-9!" />
    <meta name="twitter:image" content="https://tiniquiz.com/sudoku/favicon-CivhmDyX.svg" />
  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();class N{state="MENU";difficulty="BEGINNER";board=[];solution=[];mistakes=0;maxMistakes=3;hintsUsed=0;maxHints=10;startTime=0;elapsedTime=0;selectedCell=null;notesMode=!1;stateListeners=[];cellUpdateListeners=[];mistakeListeners=[];timeListeners=[];constructor(){this.initializeEmptyBoard()}initializeEmptyBoard(){this.board=Array(9).fill(null).map(()=>Array(9).fill(null).map(()=>({value:null,isFixed:!1,notes:new Set,isError:!1}))),this.solution=Array(9).fill(null).map(()=>Array(9).fill(0))}setDifficulty(e){this.difficulty=e}getDifficulty(){return this.difficulty}start(){this.initializeEmptyBoard(),this.generatePuzzle(),this.mistakes=0,this.hintsUsed=0,this.startTime=Date.now(),this.elapsedTime=0,this.selectedCell=null,this.notesMode=!1,this.setState("PLAYING"),this.startTimer()}generatePuzzle(){this.generateSolvedBoard();for(let t=0;t<9;t++)for(let s=0;s<9;s++)this.solution[t][s]=this.board[t][s].value;const e=this.getCellsToRemove();this.removeRandomCells(e)}getCellsToRemove(){switch(this.difficulty){case"BEGINNER":return 20;case"EASY":return 30;case"MEDIUM":return 40;case"HARD":return 50;case"EXPERT":return 60;default:return 40}}generateSolvedBoard(){this.fillDiagonalBoxes(),this.solveSudoku(0,0)}fillDiagonalBoxes(){for(let e=0;e<3;e++)this.fillBox(e*3,e*3)}fillBox(e,t){const s=[1,2,3,4,5,6,7,8,9];this.shuffleArray(s);let i=0;for(let o=0;o<3;o++)for(let a=0;a<3;a++)this.board[e+o][t+a].value=s[i++]}shuffleArray(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}}solveSudoku(e,t){if(e===9)return!0;const s=t===8?e+1:e,i=t===8?0:t+1;if(this.board[e][t].value!==null)return this.solveSudoku(s,i);const o=[1,2,3,4,5,6,7,8,9];this.shuffleArray(o);for(const a of o)if(this.isValidPlacement(e,t,a)){if(this.board[e][t].value=a,this.solveSudoku(s,i))return!0;this.board[e][t].value=null}return!1}isValidPlacement(e,t,s){for(let a=0;a<9;a++)if(a!==t&&this.board[e][a].value===s)return!1;for(let a=0;a<9;a++)if(a!==e&&this.board[a][t].value===s)return!1;const i=Math.floor(e/3)*3,o=Math.floor(t/3)*3;for(let a=0;a<3;a++)for(let u=0;u<3;u++){const d=i+a,c=o+u;if((d!==e||c!==t)&&this.board[d][c].value===s)return!1}return!0}removeRandomCells(e){const t=[];for(let s=0;s<9;s++)for(let i=0;i<9;i++)t.push({row:s,col:i});this.shuffleArray(t);for(let s=0;s<e&&s<t.length;s++){const{row:i,col:o}=t[s];this.board[i][o].value=null,this.board[i][o].isFixed=!1}for(let s=0;s<9;s++)for(let i=0;i<9;i++)this.board[s][i].value!==null&&(this.board[s][i].isFixed=!0)}selectCell(e,t){this.state==="PLAYING"&&(this.selectedCell={row:e,col:t},this.emitCellUpdate())}enterNumber(e){if(this.state!=="PLAYING"||!this.selectedCell)return;const{row:t,col:s}=this.selectedCell,i=this.board[t][s];if(!i.isFixed){if(this.notesMode)i.notes.has(e)?i.notes.delete(e):i.notes.add(e);else{if(i.notes.clear(),i.value=e,e!==this.solution[t][s]){if(i.isError=!0,this.mistakes++,this.emitMistake(),this.mistakes>=this.maxMistakes){this.setState("RESULT");return}}else i.isError=!1;this.isPuzzleComplete()&&(this.stopTimer(),this.setState("RESULT"))}this.emitCellUpdate()}}eraseCell(){if(this.state!=="PLAYING"||!this.selectedCell)return;const{row:e,col:t}=this.selectedCell,s=this.board[e][t];s.isFixed||(s.value=null,s.notes.clear(),s.isError=!1,this.emitCellUpdate())}toggleNotesMode(){this.notesMode=!this.notesMode}getNotesMode(){return this.notesMode}getHint(){if(this.state!=="PLAYING"||!this.selectedCell||this.hintsUsed>=this.maxHints)return;const{row:e,col:t}=this.selectedCell,s=this.board[e][t];s.isFixed||(this.hintsUsed++,s.value=this.solution[e][t],s.isFixed=!0,s.notes.clear(),s.isError=!1,this.isPuzzleComplete()&&(this.stopTimer(),this.setState("RESULT")),this.emitCellUpdate())}isPuzzleComplete(){for(let e=0;e<9;e++)for(let t=0;t<9;t++)if(this.board[e][t].value===null||this.board[e][t].isError)return!1;return!0}pause(){this.state==="PLAYING"&&(this.setState("PAUSED"),this.stopTimer())}resume(){this.state==="PAUSED"&&(this.setState("PLAYING"),this.startTime=Date.now()-this.elapsedTime,this.startTimer())}restart(){this.setState("MENU"),this.stopTimer()}timerInterval=null;startTimer(){this.stopTimer(),this.timerInterval=window.setInterval(()=>{this.state==="PLAYING"&&(this.elapsedTime=Date.now()-this.startTime,this.emitTime())},1e3)}stopTimer(){this.timerInterval!==null&&(clearInterval(this.timerInterval),this.timerInterval=null)}setState(e){this.state=e,this.stateListeners.forEach(t=>t(this.state))}getState(){return this.state}getBoard(){return this.board}getSelectedCell(){return this.selectedCell}getMistakes(){return this.mistakes}getMaxMistakes(){return this.maxMistakes}getHintsUsed(){return this.hintsUsed}getMaxHints(){return this.maxHints}getElapsedTime(){return this.elapsedTime}isWin(){return this.state==="RESULT"&&this.mistakes<this.maxMistakes}onStateChange(e){this.stateListeners.push(e)}onCellUpdate(e){this.cellUpdateListeners.push(e)}onMistake(e){this.mistakeListeners.push(e)}onTimeUpdate(e){this.timeListeners.push(e)}emitCellUpdate(){this.cellUpdateListeners.forEach(e=>e())}emitMistake(){this.mistakeListeners.forEach(e=>e(this.mistakes))}emitTime(){this.timeListeners.forEach(e=>e(this.elapsedTime))}formatTime(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),i=t%60;return`${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}}const l=new N;class D{currentLang="en";listeners=[];locales;constructor(e,t="en"){this.locales=e,this.currentLang=t}get language(){return this.currentLang}setLanguage(e){this.currentLang!==e&&(this.currentLang=e,localStorage.setItem("language",e),this.notifyListeners())}subscribe(e){this.listeners.push(e)}notifyListeners(){this.listeners.forEach(e=>e(this.currentLang))}getUIText(e,t){const s=this.locales[this.currentLang]?.ui;let i=s&&s[e]||e;return t&&Object.entries(t).forEach(([o,a])=>{i=i.replace(`{${o}}`,a)}),i}}const G={ui:{gameTitle:"Sudoku",gameSetup:"Game Setup",difficulty:"Difficulty",beginner:"Beginner",easy:"Easy",medium:"Medium",hard:"Hard",expert:"Expert",startGame:"Start Game",pause:"Pause",resume:"Resume",newGame:"New Game",playAgain:"Play Again",time:"Time",mistakes:"Mistakes",hints:"Hints",notes:"Notes",hint:"Hint",erase:"Erase",gameOver:"Game Over!",youWin:"Congratulations!",puzzleCompleted:"Puzzle Completed!",youLose:"Out of Chances!",tooManyMistakes:"You made too many mistakes.",completedIn:"Completed in",totalTime:"Total Time",tryAgain:"Try Again",highScores:"High Scores",rank:"Rank",date:"Date"}},H={ui:{gameTitle:"数独",gameSetup:"ゲーム設定",difficulty:"難易度",beginner:"初心者",easy:"簡単",medium:"普通",hard:"難しい",expert:"エキスパート",startGame:"ゲーム開始",pause:"一時停止",resume:"再開",newGame:"新規ゲーム",playAgain:"もう一度",time:"時間",mistakes:"ミス",hints:"ヒント",notes:"メモ",hint:"ヒント",erase:"消去",gameOver:"ゲーム終了！",youWin:"おめでとう！",puzzleCompleted:"パズル完成！",youLose:"チャンスなし！",tooManyMistakes:"ミスが多すぎます。",completedIn:"クリア時間",totalTime:"合計時間",tryAgain:"もう一度挑戦",highScores:"ハイスコア",rank:"順位",date:"日付"}},z={ui:{gameTitle:"Sudoku",gameSetup:"Thiết lập trò chơi",difficulty:"Độ khó",beginner:"Nhập môn",easy:"Dễ",medium:"Trung bình",hard:"Khó",expert:"Chuyên gia",startGame:"Bắt đầu",pause:"Tạm dừng",resume:"Tiếp tục",newGame:"Ván mới",playAgain:"Chơi lại",time:"Thời gian",mistakes:"Sai lầm",hints:"Gợi ý",notes:"Ghi chú",hint:"Gợi ý",erase:"Xóa",gameOver:"Kết thúc!",youWin:"Chúc mừng!",puzzleCompleted:"Hoàn thành!",youLose:"Hết cơ hội!",tooManyMistakes:"Bạn đã có quá nhiều lỗi sai.",completedIn:"Hoàn thành trong",totalTime:"Tổng thời gian",tryAgain:"Thử lại",highScores:"Bảng xếp hạng",rank:"Hạng",date:"Ngày"}};class P{dialog;STORAGE_KEY="consentMode";constructor(){this.dialog=document.createElement("div"),this.dialog.className="consent-dialog",this.dialog.innerHTML=`
            <div class="consent-content">
                <h3>We value your privacy</h3>
                <p>We use cookies to improve your experience, analyze traffic, and show relevant ads.</p>
                <p>You can choose to accept or reject these cookies.</p>
                <p>Essential cookies are always on because they are required for the site to work.</p>
                <div class="consent-buttons">
                    <button id="btn-reject" class="btn-reject">Reject All</button>
                    <button id="btn-accept" class="btn-accept">Accept All</button>
                </div>
            </div>
        `,document.body.appendChild(this.dialog),this.init()}init(){const e=localStorage.getItem(this.STORAGE_KEY);e?this.updateConsent(e==="granted"):this.showDialog(),this.dialog.querySelector("#btn-accept")?.addEventListener("click",()=>{this.setConsent(!0)}),this.dialog.querySelector("#btn-reject")?.addEventListener("click",()=>{this.setConsent(!1)})}showDialog(){this.dialog.style.display="flex"}hideDialog(){this.dialog.style.display="none"}setConsent(e){localStorage.setItem(this.STORAGE_KEY,e?"granted":"denied"),this.updateConsent(e),this.hideDialog()}updateConsent(e){const t=e?"granted":"denied";typeof window.gtag=="function"&&window.gtag("consent","update",{ad_storage:t,ad_user_data:t,ad_personalization:t,analytics_storage:t})}}new P;const R=localStorage.getItem("language"),r=new D({en:G,ja:H,vi:z},R||"en"),O=()=>{Y(),C(),document.querySelectorAll(".lang-btn").forEach(n=>{n.classList.toggle("active",n.dataset.lang===r.language)}),q()},$=()=>{const n=document.querySelector(".diff-btn.active");if(n){const e=n.dataset.diff;localStorage.setItem("sudoku_setup",JSON.stringify({difficulty:e}))}},q=()=>{try{const n=localStorage.getItem("sudoku_setup");if(n){const{difficulty:e}=JSON.parse(n);document.querySelectorAll(".diff-btn").forEach(t=>{t.dataset.diff===e?(t.classList.add("active"),l.setDifficulty(e)):t.classList.remove("active")})}}catch(n){console.error("Failed to load Sudoku setup:",n)}},C=()=>{const n=document.getElementById("game-title");n&&(n.textContent=r.getUIText("gameTitle"));const e=document.getElementById("menu-title");e&&(e.textContent=r.getUIText("gameSetup"));const t=document.getElementById("label-difficulty");t&&(t.textContent=r.getUIText("difficulty")),document.querySelectorAll(".diff-btn").forEach((M,A)=>{const w=["beginner","easy","medium","hard","expert"];M.textContent=r.getUIText(w[A])});const i=document.getElementById("start-btn");i&&(i.textContent=r.getUIText("startGame"));const o=document.getElementById("label-time");o&&(o.textContent=r.getUIText("time"));const a=document.getElementById("label-mistakes");a&&(a.textContent=r.getUIText("mistakes"));const u=document.getElementById("label-hints");u&&(u.textContent=r.getUIText("hints"));const d=document.getElementById("erase-btn");d&&(d.textContent=r.getUIText("erase"));const c=document.getElementById("notes-btn");c&&(c.textContent=r.getUIText("notes"));const m=document.getElementById("hint-btn");m&&(m.textContent=r.getUIText("hint"));const h=document.getElementById("new-game-btn");h&&(h.textContent=r.getUIText("newGame"));const g=document.getElementById("label-total-time");g&&(g.textContent=r.getUIText("totalTime"));const y=document.getElementById("label-final-mistakes");y&&(y.textContent=r.getUIText("mistakes"));const p=document.getElementById("label-final-hints");p&&(p.textContent=r.getUIText("hints"));const f=document.getElementById("play-again-btn");f&&(f.textContent=r.getUIText("playAgain"));const v=document.getElementById("high-scores-title");v&&(v.textContent=r.getUIText("highScores"));const E=document.getElementById("th-rank");E&&(E.textContent=r.getUIText("rank"));const I=document.getElementById("th-time");I&&(I.textContent=r.getUIText("time"));const S=document.getElementById("th-mistakes");S&&(S.textContent=r.getUIText("mistakes"));const b=document.getElementById("th-hints");b&&(b.textContent=r.getUIText("hints"));const k=document.getElementById("th-date");k&&(k.textContent=r.getUIText("date"))},Y=()=>{document.getElementById("home-btn")?.addEventListener("click",()=>{window.location.href="/"}),document.querySelectorAll(".lang-btn").forEach(n=>{n.addEventListener("click",e=>{const t=e.target.dataset.lang;r.setLanguage(t),document.querySelectorAll(".lang-btn").forEach(s=>s.classList.remove("active")),e.target.classList.add("active")})}),document.querySelectorAll(".diff-btn").forEach(n=>{n.addEventListener("click",e=>{const t=e.target,s=t.dataset.diff;document.querySelectorAll(".diff-btn").forEach(i=>i.classList.remove("active")),t.classList.add("active"),l.setDifficulty(s)})}),document.getElementById("start-btn")?.addEventListener("click",()=>{$(),l.start()}),document.querySelectorAll(".num-btn").forEach(n=>{n.addEventListener("click",e=>{const t=parseInt(e.target.dataset.num||"0");l.enterNumber(t)})}),document.getElementById("erase-btn")?.addEventListener("click",()=>{l.eraseCell()}),document.getElementById("notes-btn")?.addEventListener("click",()=>{l.toggleNotesMode();const n=document.getElementById("notes-btn");n&&n.classList.toggle("active",l.getNotesMode())}),document.getElementById("hint-btn")?.addEventListener("click",()=>{l.getHint()}),document.getElementById("new-game-btn")?.addEventListener("click",()=>{l.restart()}),document.getElementById("play-again-btn")?.addEventListener("click",()=>{l.restart()}),document.addEventListener("keydown",n=>{l.getState()==="PLAYING"&&(n.key>="1"&&n.key<="9"?l.enterNumber(parseInt(n.key)):(n.key==="Backspace"||n.key==="Delete")&&l.eraseCell())})},j=()=>{const n=document.getElementById("sudoku-grid");if(n){n.innerHTML="";for(let e=0;e<9;e++)for(let t=0;t<9;t++){const s=document.createElement("div");s.className="sudoku-cell",s.dataset.row=e.toString(),s.dataset.col=t.toString(),s.addEventListener("click",()=>{l.selectCell(e,t)}),n.appendChild(s)}}},L=()=>{const n=l.getBoard(),e=l.getSelectedCell(),t=e?n[e.row][e.col].value:null;for(let s=0;s<9;s++)for(let i=0;i<9;i++){const o=document.querySelector(`[data-row="${s}"][data-col="${i}"]`);if(!o)continue;const a=n[s][i];if(o.className="sudoku-cell",a.isFixed&&o.classList.add("fixed"),a.isError&&o.classList.add("error"),e&&e.row===s&&e.col===i&&o.classList.add("selected"),t&&a.value===t&&o.classList.add("same-number"),a.value)o.textContent=a.value.toString();else if(a.notes.size>0){o.innerHTML='<div class="cell-notes"></div>';const u=o.querySelector(".cell-notes");if(u)for(let d=1;d<=9;d++){const c=document.createElement("span");c.textContent=a.notes.has(d)?d.toString():"",u.appendChild(c)}}else o.textContent=""}},x=()=>{const n=l.getElapsedTime(),e=Math.floor(n/6e4),t=Math.floor(n%6e4/1e3),s=document.getElementById("time-display");s&&(s.textContent=`${e}:${t.toString().padStart(2,"0")}`);const i=l.getMistakes(),o=l.getMaxMistakes(),a=document.getElementById("mistakes-display");a&&(a.textContent=`${i}/${o}`);const u=l.getHintsUsed(),d=l.getMaxHints(),c=document.getElementById("hints-display");c&&(c.textContent=`${u}/${d}`);const m=document.getElementById("hint-btn");m&&(u>=d?(m.classList.add("disabled"),m.setAttribute("disabled","true")):(m.classList.remove("disabled"),m.removeAttribute("disabled")))},T=n=>{["menu-view","game-view","result-view"].forEach(e=>{const t=document.getElementById(e);t&&(e===n?t.classList.remove("hidden"):t.classList.add("hidden"))})};let U="MENU";l.onStateChange(n=>{U=n,n==="MENU"&&T("menu-view"),n==="PLAYING"&&(T("game-view"),j(),L(),x()),n==="RESULT"&&(T("result-view"),_(),B())});l.onCellUpdate(()=>{L()});l.onMistake(()=>{x()});l.onTimeUpdate(()=>{x()});const _=()=>{if(!l.isWin())return;const n=l.getDifficulty(),e=l.getElapsedTime(),t=l.getMistakes(),s=l.getHintsUsed(),i=Date.now(),o={time:e,mistakes:t,hintsUsed:s,date:i},a=`sudoku_highscores_${n}`;try{const u=localStorage.getItem(a);let d=u?JSON.parse(u):[];d.push(o),d.sort((c,m)=>c.hintsUsed!==m.hintsUsed?c.hintsUsed-m.hintsUsed:c.time!==m.time?c.time-m.time:c.mistakes-m.mistakes),d=d.slice(0,5),localStorage.setItem(a,JSON.stringify(d))}catch(u){console.error("Failed to save high score:",u)}},F=()=>{const e=`sudoku_highscores_${l.getDifficulty()}`;try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}},B=()=>{const n=document.getElementById("result-title"),e=document.getElementById("result-message"),t=document.getElementById("final-time"),s=document.getElementById("final-mistakes"),i=l.isWin();n&&(n.textContent=i?r.getUIText("youWin"):r.getUIText("gameOver")),e&&(e.textContent=i?r.getUIText("puzzleCompleted"):r.getUIText("tooManyMistakes")),t&&(t.textContent=l.formatTime(l.getElapsedTime())),s&&(s.textContent=l.getMistakes().toString());const o=document.getElementById("final-hints");o&&(o.textContent=l.getHintsUsed().toString());const a=F(),u=document.getElementById("high-scores-body"),d=document.querySelector(".high-scores-container");i?(d&&d.classList.remove("hidden"),u&&(u.innerHTML="",a.forEach((c,m)=>{const h=document.createElement("tr"),g=l.getElapsedTime(),y=l.getMistakes(),p=l.getHintsUsed();c.time===g&&c.mistakes===y&&c.hintsUsed===p&&typeof c.date=="number"&&Date.now()-c.date<1e3&&h.classList.add("current-run");let f="";if(typeof c.date=="number"){const E=r.language==="vi"?"vi-VN":"en-US";f=new Date(c.date).toLocaleDateString(E)}else f=c.date;h.innerHTML=`
                    <td>${m+1}</td>
                    <td>${c.hintsUsed}</td>
                    <td>${l.formatTime(c.time)}</td>
                    <td>${c.mistakes}</td>
                    <td>${f}</td>
                `,u.appendChild(h)}))):d&&d.classList.add("hidden")};r.subscribe(()=>{C(),U==="RESULT"&&B()});O();</script>
  <style rel="stylesheet" crossorigin>@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap";:root{--bg-primary: #0f1419;--bg-secondary: #1a1f29;--bg-card: #1e2633;--text-primary: #e8eaed;--text-secondary: #9aa0a6;--accent-primary: #8ab4f8;--accent-secondary: #f28b82;--grid-line: #4a5568;--grid-thick: #6b7280;--cell-bg: #1e2633;--cell-fixed: #2d3748;--cell-selected: rgba(138, 180, 248, .2);--cell-same-number: rgba(138, 180, 248, .1);--cell-error: rgba(242, 139, 130, .3);--shadow-sm: 0 2px 4px rgba(0, 0, 0, .3);--shadow-md: 0 4px 6px rgba(0, 0, 0, .4);--shadow-lg: 0 10px 25px rgba(0, 0, 0, .5);--shadow-glow: 0 0 20px rgba(138, 180, 248, .3)}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;background:linear-gradient(135deg,var(--bg-primary) 0%,var(--bg-secondary) 100%);color:var(--text-primary);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem}#app{width:100%;max-width:600px;margin:0 auto}h1{text-align:center;font-size:3rem;font-weight:800;margin-bottom:0;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.header-controls{display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:2rem;position:relative}.icon-btn{background:transparent;border:none;color:var(--text-secondary);cursor:pointer;padding:.5rem;border-radius:50%;transition:all .2s ease;display:flex;align-items:center;justify-content:center;width:64px;height:64px;position:absolute;left:0}.icon-btn:hover{background:var(--bg-secondary);color:var(--accent-primary);transform:translateY(-2px)}.lang-switcher{display:flex;justify-content:center;gap:.5rem;margin-bottom:2rem}.lang-btn{padding:.5rem 1rem;font-size:.875rem;font-weight:600;border:2px solid var(--grid-line);background:var(--bg-secondary);color:var(--text-secondary);border-radius:.375rem;cursor:pointer;transition:all .2s ease;min-width:3rem}.lang-btn:hover{border-color:var(--accent-primary)}.lang-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff}.card{background:var(--bg-card);border-radius:1rem;padding:2rem;box-shadow:var(--shadow-lg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}.hidden{display:none!important}#menu-view h2{font-size:2rem;margin-bottom:2rem;text-align:center;color:var(--text-primary)}.menu-options{display:flex;flex-direction:column;gap:1.5rem}.option-group{display:flex;flex-direction:column;gap:.75rem}.option-group label{font-size:.9rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.difficulty-selector{display:flex;gap:.5rem;flex-wrap:wrap}.diff-btn{flex:1;padding:1rem;font-size:1rem;font-weight:600;border:2px solid var(--grid-line);background:var(--bg-secondary);color:var(--text-primary);border-radius:.5rem;cursor:pointer;transition:all .2s ease}.diff-btn:hover{border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.diff-btn.active{background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border-color:transparent;color:#fff;box-shadow:var(--shadow-glow)}button.primary{width:100%;padding:1rem 2rem;font-size:1.1rem;font-weight:700;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));color:#fff;border:none;border-radius:.5rem;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-md);margin-top:1rem}button.primary:hover{transform:translateY(-2px);box-shadow:var(--shadow-glow)}#game-view{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.game-header{width:100%;display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--bg-secondary);border-radius:.5rem}.stat{display:flex;flex-direction:column;align-items:center;gap:.25rem}.stat-label{font-size:.75rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.stat-value{font-size:1.25rem;font-weight:700;color:var(--accent-primary)}.stat-value.error{color:var(--accent-secondary)}.sudoku-grid{display:grid;grid-template-columns:repeat(9,1fr);gap:0;background:var(--grid-thick);padding:2px;border-radius:.5rem;box-shadow:var(--shadow-lg);max-width:600px;width:100%;margin:0 auto}.sudoku-cell{aspect-ratio:1;background:var(--cell-bg);border:1px solid var(--grid-line);display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;cursor:pointer;transition:all .2s ease;position:relative}.sudoku-cell:hover{background:#8ab4f81a}.sudoku-cell.fixed{background:var(--cell-fixed);color:var(--accent-primary);cursor:default}.sudoku-cell.selected{background:var(--cell-selected);box-shadow:inset 0 0 0 2px var(--accent-primary)}.sudoku-cell.same-number{background:var(--cell-same-number)}.sudoku-cell.error{background:var(--cell-error);color:var(--accent-secondary)}.sudoku-cell:nth-child(3n){border-right:2px solid var(--grid-thick)}.sudoku-cell:nth-child(n+19):nth-child(-n+27),.sudoku-cell:nth-child(n+46):nth-child(-n+54){border-bottom:2px solid var(--grid-thick)}.cell-notes{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;font-size:.6rem;font-weight:500;color:var(--text-secondary);position:absolute;inset:2px}.number-pad{display:grid;grid-template-columns:repeat(5,1fr);gap:.5rem;width:100%}.num-btn{aspect-ratio:1;background:var(--bg-secondary);border:2px solid var(--grid-line);border-radius:.5rem;font-size:1.5rem;font-weight:700;color:var(--text-primary);cursor:pointer;transition:all .2s ease}.num-btn:hover{border-color:var(--accent-primary);transform:scale(1.05)}.num-btn:active{transform:scale(.95)}.game-controls{display:flex;gap:.5rem;width:100%}.control-btn{flex:1;padding:.75rem;font-size:.9rem;font-weight:600;background:var(--bg-secondary);border:2px solid var(--grid-line);border-radius:.5rem;color:var(--text-primary);cursor:pointer;transition:all .2s ease}.control-btn:hover{border-color:var(--accent-primary)}.control-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff}#result-view{text-align:center}#result-view h2{font-size:2.5rem;margin-bottom:1.5rem;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.result-message{font-size:1.25rem;margin-bottom:2rem;color:var(--text-secondary)}.result-stats{display:flex;justify-content:center;gap:2rem;margin:2rem 0;padding:1.5rem;background:var(--bg-secondary);border-radius:.5rem}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.animate-fade-in{animation:fadeIn .3s ease}@media(max-width:768px){h1{font-size:2rem}.card{padding:1.5rem}.sudoku-cell{font-size:1.25rem}.game-header{flex-direction:column;gap:.75rem}.result-stats{flex-direction:column;gap:1rem}.difficulty-selector{gap:.5rem}.diff-btn{min-width:calc(50% - .25rem);font-size:.9rem;padding:.875rem .5rem}}@media(max-width:480px){.sudoku-cell{font-size:1rem}.num-btn{font-size:1.25rem}.cell-notes{font-size:.5rem}}.consent-dialog{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:10000;display:none;align-items:center;justify-content:center;padding:1rem;animation:fadeIn .3s ease}.consent-content{background:var(--bg-secondary);border-radius:1rem;padding:2rem;max-width:500px;width:100%;box-shadow:var(--shadow-lg);border:1px solid rgba(255,255,255,.1);animation:slideUp .3s ease}.consent-content h3{margin:0 0 1rem;font-size:1.5rem;color:var(--text-primary)}.consent-content p{margin:0 0 1.5rem;color:var(--text-secondary);line-height:1.6}.consent-buttons{display:flex;gap:.75rem;flex-wrap:wrap}.btn-accept,.btn-reject{flex:1;min-width:120px;padding:.875rem 1.5rem;border-radius:.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .2s ease;border:none}.btn-accept{background:var(--accent-primary);color:#fff}.btn-accept:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.btn-reject{background:transparent;border:2px solid var(--text-secondary);color:var(--text-secondary)}.btn-reject:hover{border-color:var(--text-primary);color:var(--text-primary);background:#ffffff0d}@keyframes slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media(max-width:640px){.consent-content{padding:1.5rem}.consent-buttons{flex-direction:column}.btn-accept,.btn-reject{width:100%}}.high-scores-container{width:100%;margin-top:2rem;animation:fadeIn .5s ease}#high-scores-title{font-size:1.5rem;margin-bottom:1rem;color:var(--text-primary);text-align:center}#high-scores-table{width:100%;border-collapse:collapse;background:#0003;border-radius:.5rem;overflow:hidden}#high-scores-table th,#high-scores-table td{padding:1rem;text-align:center;border-bottom:1px solid rgba(255,255,255,.05)}#high-scores-table th{background:#ffffff0d;color:var(--text-secondary);font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.05em}#high-scores-table td{color:var(--text-primary);font-size:1rem}#high-scores-table tr:last-child td{border-bottom:none}#high-scores-table tr.current-run{background:#8ab4f81a;border-left:3px solid var(--accent-primary)}#high-scores-table tr.current-run td{color:var(--accent-primary);font-weight:600}</style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56G5F5W4" height="0" width="0"
            style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="app">
        <div class="header-controls">
        <button id="home-btn" class="icon-btn" aria-label="Back to Home">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        </button>
        <h1 id="game-title">Sudoku</h1>
        </div>
        
        <!-- Language Switcher -->
        <div class="lang-switcher">
        <button class="lang-btn active" data-lang="en">EN</button>
        <button class="lang-btn" data-lang="ja">JA</button>
        <button class="lang-btn" data-lang="vi">VI</button>
        </div>
        
        <!-- Menu View -->
        <div id="menu-view" class="card animate-fade-in">
        <h2 id="menu-title">Game Setup</h2>
        <div class="menu-options">
            <div class="option-group">
            <label id="label-difficulty">Difficulty</label>
            <div class="difficulty-selector">
                <button class="diff-btn active" data-diff="BEGINNER">Beginner</button>
                <button class="diff-btn" data-diff="EASY">Easy</button>
                <button class="diff-btn" data-diff="MEDIUM">Medium</button>
                <button class="diff-btn" data-diff="HARD">Hard</button>
                <button class="diff-btn" data-diff="EXPERT">Expert</button>
            </div>
            </div>

            <button id="start-btn" class="primary">Start Game</button>
        </div>
        </div>

        <!-- Game View -->
        <div id="game-view" class="card hidden animate-fade-in">
        <div class="game-header">
            <div class="stat">
            <div class="stat-label" id="label-time">Time</div>
            <div class="stat-value" id="time-display">0:00</div>
            </div>
            <div class="stat">
            <div class="stat-label" id="label-mistakes">Mistakes</div>
            <div class="stat-value error" id="mistakes-display">0/3</div>
            </div>
            <div class="stat">
            <div class="stat-label" id="label-hints">Hints</div>
            <div class="stat-value" id="hints-display">0</div>
            </div>
        </div>
        
        <div class="sudoku-grid" id="sudoku-grid">
            <!-- Grid cells will be rendered here -->
        </div>

        <div class="number-pad">
            <button class="num-btn" data-num="1">1</button>
            <button class="num-btn" data-num="2">2</button>
            <button class="num-btn" data-num="3">3</button>
            <button class="num-btn" data-num="4">4</button>
            <button class="num-btn" data-num="5">5</button>
            <button class="num-btn" data-num="6">6</button>
            <button class="num-btn" data-num="7">7</button>
            <button class="num-btn" data-num="8">8</button>
            <button class="num-btn" data-num="9">9</button>
            <button class="control-btn" id="erase-btn">Erase</button>
        </div>

        <div class="game-controls">
            <button class="control-btn" id="notes-btn">Notes</button>
            <button class="control-btn" id="hint-btn">Hint</button>
            <button class="control-btn" id="new-game-btn">New Game</button>
        </div>
        </div>

        <!-- Result View -->
        <div id="result-view" class="card hidden animate-fade-in">
        <h2 id="result-title">Game Over!</h2>
        
        <div class="result-message" id="result-message"></div>

        <div class="result-stats">
            <div class="stat">
            <div class="stat-label" id="label-total-time">Total Time</div>
            <div class="stat-value" id="final-time">0:00</div>
            </div>
            <div class="stat">
            <div class="stat-label" id="label-final-mistakes">Mistakes</div>
            <div class="stat-value error" id="final-mistakes">0</div>
            </div>
            <div class="stat">
            <div class="stat-label" id="label-final-hints">Hints</div>
            <div class="stat-value" id="final-hints">0</div>
            </div>
        </div>

        <!-- High Scores Table -->
        <div class="high-scores-container">
            <h3 id="high-scores-title">High Scores</h3>
            <table id="high-scores-table">
            <thead>
                <tr>
                <th id="th-rank">Rank</th>
                <th id="th-hints">Hints</th>
                <th id="th-time">Time</th>
                <th id="th-mistakes">Mistakes</th>
                <th id="th-date">Date</th>
                </tr>
            </thead>
            <tbody id="high-scores-body">
                <!-- Scores injected here -->
            </tbody>
            </table>
        </div>

        <button id="play-again-btn" class="primary">Play Again</button>
        </div>        
    </div>

</body>

</html>